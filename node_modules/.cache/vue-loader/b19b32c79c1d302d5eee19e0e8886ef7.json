{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jayson/Desktop/work/DDM-admin/src/views/admin/monitor/celery/periodic-task/periodic-index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/views/admin/monitor/celery/periodic-task/periodic-index.vue","mtime":1720245294017},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1720245293567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFN5bmNEYXRhQXBpIGZyb20gIkAvYXBpL2FkbWluL21vbml0b3IvY2VsZXJ5IjsKaW1wb3J0IEVkaXRGb3JtUGVyaW9kaWNUYXNrIGZyb20gIi4vZWRpdC1mb3JtLXBlcmlvZGljLXRhc2siOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgRWRpdEZvcm1QZXJpb2RpY1Rhc2sgfSwKICBwcm9wczogewogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpZWxkczogWwogICAgICAgIC8vIHByb3As5ZCO56uv5YiX5ZCN56ewLCDlv4Xloas7IGxhYmVsLOWJjeerr+ihqOWktOWQjeensCwg5b+F5aGrOyDlhbbku5blj6/mnInlj6/ml6AKICAgICAgICB7IHByb3A6ICJuYW1lIiwgbGFiZWw6ICLlkI3np7AiLCBzaG93OiB0cnVlLCB1bmlxdWU6IHRydWUgfSwKICAgICAgICB7IHByb3A6ICJ0YXNrIiwgbGFiZWw6ICJjZWxlcnnku7vliqEiLCBzaG93OiB0cnVlLCB3aWR0aDogNDAwIH0sCiAgICAgICAgeyBwcm9wOiAiaW50ZXJ2YWwiLCBsYWJlbDogIumikeeOhyIsIHNob3c6IHRydWUsIHNlYXJjaDogdHJ1ZSB9LAogICAgICAgIHsgcHJvcDogImNyb250YWIiLCBsYWJlbDogIuS7u+WKoee8luaOkiIsIHNob3c6IHRydWUsIHNlYXJjaDogdHJ1ZSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IHByb3A6ICJhcmdzIiwgbGFiZWw6ICLlj4LmlbAiLCBzaG93OiBmYWxzZSwgc2VhcmNoOiB0cnVlLCBzb3J0YWJsZTogdHJ1ZSwgd2lkdGg6IDgwIH0sCiAgICAgICAgeyBwcm9wOiAia3dhcmdzIiwgbGFiZWw6ICLkvY3nva7lj4LmlbAiLCBzaG93OiBmYWxzZSwgc2VhcmNoOiB0cnVlLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsgcHJvcDogInF1ZXVlIiwgbGFiZWw6ICLpmJ/liJciLCBzaG93OiBmYWxzZSwgc2VhcmNoOiB0cnVlLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsgcHJvcDogImV4Y2hhbmdlIiwgbGFiZWw6ICLnirbmgIEiLCBzaG93OiBmYWxzZSwgc2VhcmNoOiB0cnVlIH0sCiAgICAgICAgeyBwcm9wOiAicm91dGluZ19rZXkiLCBsYWJlbDogIui3r+eUseWvhumSpSIsIHNob3c6IGZhbHNlLCBzZWFyY2g6IHRydWUgfSwKICAgICAgICB7IHByb3A6ICJleHBpcmVzIiwgbGFiZWw6ICLov4fmnJ/ml7bpl7QiLCBzaG93OiBmYWxzZSwgc2VhcmNoOiB0cnVlLCB0eXBlOiAiZGF0ZXRpbWUiIH0sCiAgICAgICAgeyBwcm9wOiAiZW5hYmxlZCIsIGxhYmVsOiAi5piv5ZCm5byA5ZCvIiwgc2hvdzogdHJ1ZSwgc2VhcmNoOiB0cnVlIH0KICAgICAgXSwKICAgICAgcGVyaW9kaWNEYXRhOiBbXSwKICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLAogICAgICBQZXJpb2RpY1RhZ0xpc3Q6IFtdLAogICAgICBlZGl0UGVyaW9kaWM6IHt9LAogICAgICBlZGl0UGVyaW9kaWNGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGVkaXRQZXJpb2RpY0NyZWF0ZTogZmFsc2UsCiAgICAgIG1vZGVsRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBtb2RlbFN3YWdnZXJWaXNpYmxlOiBmYWxzZSwKICAgICAgYmF0Y2hFZGl0Rm9ybVZpc2libGU6IGZhbHNlLAogICAgICBkZXRhaWw6IFtdLAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm06IHsgbmFtZTogIiIgfSwKICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxMjBweCIsCiAgICAgIHJvdzogIiIsCiAgICAgIHJlcWxvYWRpbmc6IGZhbHNlLAogICAgICB0YXNrX2lkOiAiIgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgfSwKICB3YXRjaDogewogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXREYXRhKCkgewogICAgICBTeW5jRGF0YUFwaS5saXN0UGVyaW9kaWNUYXNrKHsgcGFnZVNpemU6IDEwMDAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmRldGFpbCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0cyB8fCBbXTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVmcmVzaChpbmZvcykgewogICAgICB0aGlzLiRyZWZzLnRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZSIpOwogICAgfSwKICAgIGhhbmRsZVBlcmlvZGljU2VsZWN0aW9uQ2hhbmdlKGluZm9zKSB7CiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBpbmZvczsKICAgIH0sCiAgICBoYW5kbGVPcGVuRWRpdFBlcmlvZGljRm9ybShjcmVhdGUgPSBmYWxzZSwgaW5mbykgewogICAgICBpZiAoY3JlYXRlKSB7CiAgICAgICAgdGhpcy5lZGl0UGVyaW9kaWMgPSB7IHBlcmlvZGljOiB0aGlzLmRldGFpbC5pZCB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZWRpdFBlcmlvZGljID0geyAuLi5pbmZvIH07CiAgICAgIH0KICAgICAgdGhpcy5lZGl0UGVyaW9kaWNDcmVhdGUgPSBjcmVhdGU7CiAgICAgIHRoaXMuZWRpdFBlcmlvZGljRm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZVBlcmlvZGljVGFibGUoaW5kZXgsIGluZm8pIHsKICAgICAgdGhpcy4kY29uZmlybSgi56Gu6K6k5Yig6Zmk77yfIiwgIuehruiupOS/oeaBryIsIHsKICAgICAgICBkaXN0aW5ndWlzaENhbmNlbEFuZENsb3NlOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi5Yig6ZmkIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIgogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBTeW5jRGF0YUFwaS5kZWxldGVQZXJpb2RpY1Rhc2soaW5mby5pZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zdCBuYW1lID0gaW5mby5uYW1lID8gaW5mby5uYW1lICsgIjoiIDogIiI7CiAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MobmFtZSArICLliKDpmaTmiJDlip8iKTsKICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU3VjY2Vzc0VkaXRQZXJpb2RpYygpIHsKICAgICAgdGhpcy5pbml0RGF0YSgpOwogICAgICB0aGlzLiRlbWl0KCJ1cGRhdGUiKTsKICAgIH0sCiAgICBoYW5kbGVPcGVuTW9kZWxGb3JtKCkgewogICAgICB0aGlzLm1vZGVsRm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZU9wZW5Td2FnZ2VyKG1vZGVsID0gZmFsc2UpIHsKICAgICAgdGhpcy5tb2RlbFN3YWdnZXJWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVCYXRjaEVkaXQoKSB7CiAgICAgIHRoaXMuYmF0Y2hFZGl0Rm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIHRlc3Qocm93KSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLnJvdyA9IHJvdzsKICAgICAgdGhpcy5EZXRhaWxNc2cgPSAiIjsKICAgIH0sCiAgICBoYW5kbGVPcGVyYXRlKCkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMucmVxbG9hZGluZyA9IHRydWU7CiAgICAgIFN5bmNEYXRhQXBpLm9wZXJhdGVzeW5jZGF0YSh7IGNlbGVyeV9uYW1lOiB0aGlzLnJvdy50YXNrIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMudGFza19pZCA9IHJlc3BvbnNlLmRhdGEudGFza19pZDsKICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuaJp+ihjOaIkOWKn++8gSIpOwogICAgICB9KTsKICAgIH0sCiAgICBjbG9zZVZpZXcoKSB7CiAgICAgIHRoaXMucmVxbG9hZGluZyA9IGZhbHNlOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["periodic-index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"periodic-index.vue","sourceRoot":"src/views/admin/monitor/celery/periodic-task","sourcesContent":["<!--\n@description: 接口信息页面\n-->\n<template>\n  <div class=\"app-container\">\n    <common-static-table\n      ref=\"table\"\n      :data=\"detail\"\n      :fields=\"fields\"\n      selection\n      @selection-change=\"handlePeriodicSelectionChange\"\n    >\n      <template #enabled=\"scope\">\n        <el-switch\n          :value=\"scope.values[scope.prop]\"\n          active-color=\"#13ce66\"\n          disabled\n          inactive-color=\"#ff4949\"\n        />\n      </template>\n      <template #interval=\"scope\">\n        {{ getIntervalData(scope.values[`${scope.prop}_list`]) }}\n      </template>\n      <template #crontab=\"scope\">\n        {{ getCrontabData(scope.values[`${scope.prop}_list`]) }}\n      </template>\n      <template slot=\"button\">\n        <el-button\n          :size=\"$ELEMENT.size\"\n          type=\"primary\"\n          title=\"添加任务\"\n          icon=\"el-icon-circle-plus\"\n          @click=\"handleOpenEditPeriodicForm(true)\"\n        >新增\n        </el-button>\n      </template>\n      <!--以下是自定义新增的工具栏内容-->\n      <!--      <template slot=\"tools\">-->\n      <!--        <el-popover placement=\"bottom\" title=\"温馨提示\" width=\"400\" trigger=\"click\" style=\"margin-left: 10px\">-->\n      <!--          <li>待编写</li>-->\n      <!--          <el-button-->\n      <!--            slot=\"reference\"-->\n      <!--            name=\"refresh\"-->\n      <!--            type=\"info\"-->\n      <!--            size=\"small\"-->\n      <!--            icon=\"el-icon-info\"-->\n      <!--            title=\"温馨提示\"/>-->\n      <!--        </el-popover>-->\n      <!--      </template>-->\n      <!--以下是自定义新增的列的配置内容-->\n      <template slot=\"column\">\n        <el-table-column fixed=\"right\" label=\"操作\" align=\"center\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button\n              :size=\"$ELEMENT.size\"\n              type=\"primary\"\n              title=\"立即执行\"\n              icon=\"el-icon-caret-right\"\n              circle\n              @click=\"test(scope.row)\"\n            />\n            <el-button\n              :size=\"$ELEMENT.size\"\n              type=\"primary\"\n              title=\"编辑\"\n              icon=\"el-icon-edit\"\n              circle\n              @click=\"handleOpenEditPeriodicForm(false, scope.row)\"\n            />\n            <el-button\n              :size=\"$ELEMENT.size\"\n              type=\"danger\"\n              title=\"移除\"\n              icon=\"el-icon-delete\"\n              circle\n              @click=\"handleRemovePeriodicTable(scope.$index, scope.row)\"\n            />\n          </template>\n        </el-table-column>\n      </template>\n    </common-static-table>\n    <el-dialog :visible.sync=\"dialogFormVisible\" title=\"请确认\">\n      <span>\n        正在同步：{{ row.task }}\n      </span>\n      <br>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleOperate\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <edit-form-periodic-task\n      v-model=\"editPeriodicFormVisible\"\n      :entity=\"editPeriodic\"\n      :create=\"editPeriodicCreate\"\n      :periodic-data=\"periodicData\"\n      :width=\"'40%'\"\n      @success=\"handleSuccessEditPeriodic\"\n    />\n  </div>\n</template>\n\n<script>\nimport * as SyncDataApi from \"@/api/admin/monitor/celery\";\nimport EditFormPeriodicTask from \"./edit-form-periodic-task\";\n\nexport default {\n  components: { EditFormPeriodicTask },\n  props: {\n  },\n  data() {\n    return {\n      fields: [\n        // prop,后端列名称, 必填; label,前端表头名称, 必填; 其他可有可无\n        { prop: \"name\", label: \"名称\", show: true, unique: true },\n        { prop: \"task\", label: \"celery任务\", show: true, width: 400 },\n        { prop: \"interval\", label: \"频率\", show: true, search: true },\n        { prop: \"crontab\", label: \"任务编排\", show: true, search: true, sortable: true },\n        { prop: \"args\", label: \"参数\", show: false, search: true, sortable: true, width: 80 },\n        { prop: \"kwargs\", label: \"位置参数\", show: false, search: true, sortable: true },\n        { prop: \"queue\", label: \"队列\", show: false, search: true, sortable: true },\n        { prop: \"exchange\", label: \"状态\", show: false, search: true },\n        { prop: \"routing_key\", label: \"路由密钥\", show: false, search: true },\n        { prop: \"expires\", label: \"过期时间\", show: false, search: true, type: \"datetime\" },\n        { prop: \"enabled\", label: \"是否开启\", show: true, search: true }\n      ],\n      periodicData: [],\n      multipleSelection: [],\n      PeriodicTagList: [],\n      editPeriodic: {},\n      editPeriodicFormVisible: false,\n      editPeriodicCreate: false,\n      modelFormVisible: false,\n      modelSwaggerVisible: false,\n      batchEditFormVisible: false,\n      detail: [],\n      dialogFormVisible: false,\n      form: { name: \"\" },\n      formLabelWidth: \"120px\",\n      row: \"\",\n      reqloading: false,\n      task_id: \"\"\n    };\n  },\n  computed: {\n  },\n  watch: {\n  },\n  created() {\n    this.initData();\n  },\n  methods: {\n    initData() {\n      SyncDataApi.listPeriodicTask({ pageSize: 1000 }).then((response) => {\n        this.detail = response.data.results || [];\n      });\n    },\n    handleRefresh(infos) {\n      this.$refs.table.clearSelection();\n      this.$emit(\"update\");\n    },\n    handlePeriodicSelectionChange(infos) {\n      this.multipleSelection = infos;\n    },\n    handleOpenEditPeriodicForm(create = false, info) {\n      if (create) {\n        this.editPeriodic = { periodic: this.detail.id };\n      } else {\n        this.editPeriodic = { ...info };\n      }\n      this.editPeriodicCreate = create;\n      this.editPeriodicFormVisible = true;\n    },\n    handleRemovePeriodicTable(index, info) {\n      this.$confirm(\"确认删除？\", \"确认信息\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"删除\",\n        cancelButtonText: \"取消\"\n      }).then(() => {\n        SyncDataApi.deletePeriodicTask(info.id).then(response => {\n          const name = info.name ? info.name + \":\" : \"\";\n          this.msgSuccess(name + \"删除成功\");\n          this.initData();\n        });\n      });\n    },\n    handleSuccessEditPeriodic() {\n      this.initData();\n      this.$emit(\"update\");\n    },\n    handleOpenModelForm() {\n      this.modelFormVisible = true;\n    },\n    handleOpenSwagger(model = false) {\n      this.modelSwaggerVisible = true;\n    },\n    handleBatchEdit() {\n      this.batchEditFormVisible = true;\n    },\n    test(row) {\n      this.dialogFormVisible = true;\n      this.row = row;\n      this.DetailMsg = \"\";\n    },\n    handleOperate() {\n      this.dialogFormVisible = false;\n      this.reqloading = true;\n      SyncDataApi.operatesyncdata({ celery_name: this.row.task }).then(response => {\n        this.task_id = response.data.task_id;\n        this.msgSuccess(\"执行成功！\");\n      });\n    },\n    closeView() {\n      this.reqloading = false;\n    }\n  }\n};\n</script>\n\n<style scoped>\n  .el-table th {\n    display: table-cell !important;\n  }\n</style>\n"]}]}