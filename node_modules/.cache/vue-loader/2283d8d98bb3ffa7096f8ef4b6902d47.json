{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jayson/Desktop/work/DDM-admin/src/views/admin/monitor/celery/crontab-task/crontab-index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/views/admin/monitor/celery/crontab-task/crontab-index.vue","mtime":1720245294016},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1720245293567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFN5bmNEYXRhQXBpIGZyb20gIkAvYXBpL2FkbWluL21vbml0b3IvY2VsZXJ5IjsKaW1wb3J0IEVkaXRGb3JtQ3JvbnRhYlRhc2sgZnJvbSAiLi9lZGl0LWZvcm0tY3JvbnRhYi10YXNrIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEVkaXRGb3JtQ3JvbnRhYlRhc2sgfSwKICBwcm9wczogewogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBlcmlvZGljRGF0YTogW10sCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwKICAgICAgQ3JvbnRhYlRhZ0xpc3Q6IFtdLAogICAgICBlZGl0Q3JvbnRhYjoge30sCiAgICAgIGVkaXRDcm9udGFiRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBlZGl0Q3JvbnRhYkNyZWF0ZTogZmFsc2UsCiAgICAgIG1vZGVsRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBtb2RlbFN3YWdnZXJWaXNpYmxlOiBmYWxzZSwKICAgICAgYmF0Y2hFZGl0Rm9ybVZpc2libGU6IGZhbHNlLAogICAgICBkZXRhaWw6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICB9LAogIHdhdGNoOiB7CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0RGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdERhdGEoKSB7CiAgICAgIFN5bmNEYXRhQXBpLmxpc3RDcm9udGFiU2NoZWR1bGUoeyBwYWdlU2l6ZTogMTAwMCB9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZGV0YWlsID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzIHx8IFtdOwogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNyb250YWIgPSB0aGlzLmRldGFpbDsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVmcmVzaChpbmZvcykgewogICAgICB0aGlzLiRyZWZzLnRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZSIpOwogICAgfSwKICAgIGhhbmRsZU9wZW5FZGl0Q3JvbnRhYkZvcm0oY3JlYXRlID0gZmFsc2UsIGluZm8pIHsKICAgICAgaWYgKGNyZWF0ZSkgewogICAgICAgIHRoaXMuZWRpdENyb250YWIgPSB7IHBlcmlvZGljOiB0aGlzLmRldGFpbC5pZCB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZWRpdENyb250YWIgPSB7IC4uLmluZm8gfTsKICAgICAgfQogICAgICB0aGlzLmVkaXRDcm9udGFiQ3JlYXRlID0gY3JlYXRlOwogICAgICB0aGlzLmVkaXRDcm9udGFiRm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZUNyb250YWJUYWJsZShpbmZvKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuehruiupOWIoOmZpO+8nyIsICLnoa7orqTkv6Hmga8iLCB7CiAgICAgICAgZGlzdGluZ3Vpc2hDYW5jZWxBbmRDbG9zZTogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuWIoOmZpCIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgU3luY0RhdGFBcGkuZGVsZXRlQ3JvbnRhYlNjaGVkdWxlKGluZm8uaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgbmFtZSA9IGluZm8ubmFtZSA/IGluZm8ubmFtZSArICI6IiA6ICIiOwogICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKG5hbWUgKyAi5Yig6Zmk5oiQ5YqfISIpOwogICAgICAgICAgdGhpcy5pbml0RGF0YSgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzRWRpdENyb250YWIoKSB7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZSIpOwogICAgfSwKICAgIGhhbmRsZU9wZW5Nb2RlbEZvcm0oKSB7CiAgICAgIHRoaXMubW9kZWxGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlT3BlblN3YWdnZXIobW9kZWwgPSBmYWxzZSkgewogICAgICB0aGlzLm1vZGVsU3dhZ2dlclZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZUJhdGNoRWRpdCgpIHsKICAgICAgdGhpcy5iYXRjaEVkaXRGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["crontab-index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"crontab-index.vue","sourceRoot":"src/views/admin/monitor/celery/crontab-task","sourcesContent":["<!--\n@author: xuchi\n@description: 接口信息页面\n-->\n<template>\n  <div class=\"app-container\">\n    <el-card class=\"box-card\" shadow=\"never\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>任务定时</span>\n        <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"handleOpenEditCrontabForm(true)\">\n          新增定时\n        </el-button>\n      </div>\n      <div style=\"height: 200px;\">\n        <el-scrollbar>\n          <div v-for=\"(val,index) in detail\" :key=\"index\">\n            <div class=\"text\" style=\"display:inline-block;height: 10px;\">\n              <span>{{ getCrontabData(val) }}</span>\n            </div>\n            <div style=\"float: right;padding-right: 10px;display:inline-block\">\n              <el-button\n                type=\"primary\"\n                icon=\"el-icon-edit\"\n                size=\"mini\"\n                circle\n                @click=\"handleOpenEditCrontabForm(false, val)\"\n              />\n              <el-button\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                size=\"mini\"\n                circle\n                @click=\"handleRemoveCrontabTable(val)\"\n              />\n            </div>\n            <el-divider />\n          </div>\n          <div v-if=\"detail.length===0\" style=\"text-align: center\">\n            暂无信息\n          </div>\n        </el-scrollbar>\n      </div>\n    </el-card>\n    <edit-form-crontab-task\n      v-model=\"editCrontabFormVisible\"\n      :entity=\"editCrontab\"\n      :create=\"editCrontabCreate\"\n      :periodic-data=\"periodicData\"\n      :width=\"'30%'\"\n      @success=\"handleSuccessEditCrontab\"\n    />\n  </div>\n</template>\n\n<script>\nimport * as SyncDataApi from \"@/api/admin/monitor/celery\";\nimport EditFormCrontabTask from \"./edit-form-crontab-task\";\n\nexport default {\n  components: { EditFormCrontabTask },\n  props: {\n  },\n  data() {\n    return {\n      periodicData: [],\n      multipleSelection: [],\n      CrontabTagList: [],\n      editCrontab: {},\n      editCrontabFormVisible: false,\n      editCrontabCreate: false,\n      modelFormVisible: false,\n      modelSwaggerVisible: false,\n      batchEditFormVisible: false,\n      detail: []\n    };\n  },\n  computed: {\n  },\n  watch: {\n  },\n  created() {\n    this.initData();\n  },\n  methods: {\n    initData() {\n      SyncDataApi.listCrontabSchedule({ pageSize: 1000 }).then((response) => {\n        this.detail = response.data.results || [];\n        this.$store.state.Crontab = this.detail;\n      });\n    },\n    handleRefresh(infos) {\n      this.$refs.table.clearSelection();\n      this.$emit(\"update\");\n    },\n    handleOpenEditCrontabForm(create = false, info) {\n      if (create) {\n        this.editCrontab = { periodic: this.detail.id };\n      } else {\n        this.editCrontab = { ...info };\n      }\n      this.editCrontabCreate = create;\n      this.editCrontabFormVisible = true;\n    },\n    handleRemoveCrontabTable(info) {\n      this.$confirm(\"确认删除？\", \"确认信息\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"删除\",\n        cancelButtonText: \"取消\"\n      }).then(() => {\n        SyncDataApi.deleteCrontabSchedule(info.id).then(response => {\n          const name = info.name ? info.name + \":\" : \"\";\n          this.msgSuccess(name + \"删除成功!\");\n          this.initData();\n        });\n      });\n    },\n    handleSuccessEditCrontab() {\n      this.$emit(\"update\");\n    },\n    handleOpenModelForm() {\n      this.modelFormVisible = true;\n    },\n    handleOpenSwagger(model = false) {\n      this.modelSwaggerVisible = true;\n    },\n    handleBatchEdit() {\n      this.batchEditFormVisible = true;\n    }\n  }\n};\n</script>\n\n<style scoped>\n  .el-table th {\n    display: table-cell !important;\n  }\n  .el-scrollbar {\n      height: 100%;\n  }\n\n  .el-scrollbar__wrap {\n      overflow: scroll;\n      width: 100%;\n      height: 100%;\n  }\n\n  .el-scrollbar__view {\n      height: 100%;\n  }\n\n  .el-divider--horizontal {\n      margin: 14px 0;\n  }\n\n  .text {\n      padding-left: 20px;\n      font-size: 14px;\n  }\n  .el-button--mini.is-circle {\n      padding: 5px;\n\n  }\n</style>\n"]}]}