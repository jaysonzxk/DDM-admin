{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jayson/Desktop/work/DDM-admin/src/views/admin/monitor/celery/interval-task/edit-form-Interval-task.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/views/admin/monitor/celery/interval-task/edit-form-Interval-task.vue","mtime":1720245294017},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1720245293567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFN5bmNEYXRhQXBpIGZyb20gIkAvYXBpL2FkbWluL21vbml0b3IvY2VsZXJ5IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZW50aXR5OiB7IHR5cGU6IE9iamVjdCwgZGVmYXVsdDogbnVsbCB9LAogICAgdmFsdWU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogbnVsbCB9LAogICAgY3JlYXRlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sCiAgICB3aWR0aDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICI1MCUiIH0sCiAgICB0YWdzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiAoKSA9PiBbXSB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdHM6IFsKICAgICAgICB7IGxhYmVsOiAi5aSpIiwgdmFsdWU6ICJkYXlzIiB9LAogICAgICAgIHsgbGFiZWw6ICLlsI/ml7YiLCB2YWx1ZTogImhvdXJzIiB9LAogICAgICAgIHsgbGFiZWw6ICLliIbpkp8iLCB2YWx1ZTogIm1pbnV0ZXMiIH0sCiAgICAgICAgeyBsYWJlbDogIuenkiIsIHZhbHVlOiAic2Vjb25kcyIgfQogICAgICBdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBpbnN0YW5jZUlkOiAiIiwKICAgICAgICBldmVyeTogMSwKICAgICAgICBwZXJpb2Q6ICIiLAogICAgICAgIHRpdGxlOiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRpYWxvZ1RpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5jcmVhdGUgPyAi5paw5aKe5Lu75Yqh6aKR546HIiA6ICLnvJbovpHku7vliqHpopHnjociOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKHZhbCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB2YWw7CiAgICB9LAogICAgZGlhbG9nVmlzaWJsZSh2YWwpIHsKICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB2YWwpOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRpYWxvZ09wZW4oKSB7CiAgICAgIC8vIOS4ulRydWXmhI/lkbPnnYDmmK/pgJrov4fpgY3lj4rmlrnlvI/miZPlvIDlr7nor53moYYKICAgICAgaWYgKCF0aGlzLmNyZWF0ZSkgewogICAgICAgIHRoaXMuZm9ybSA9IHsgLi4udGhpcy5lbnRpdHkgfTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IGRhdGEgPSB7IC4uLnRoaXMuZm9ybSB9OwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgICAgIGlmICh0aGlzLmNyZWF0ZSkgewogICAgICAgICAgICBkZWxldGUgZGF0YVsiaW5zdGFuY2VJZCJdOwogICAgICAgICAgICBTeW5jRGF0YUFwaS5jcmVhdGVJbnRlcnZhbHNjaGVkdWxlKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoInN1Y2Nlc3MiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8hIik7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTeW5jRGF0YUFwaS51cGRhdGVJbnRlcnZhbHNjaGVkdWxlKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJGVtaXQoInN1Y2Nlc3MiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuabtOaWsOaIkOWKnyEiKTsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRpYWxvZ0Nsb3NlKCkgewogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy4kcGFyZW50LmluaXREYXRhKCk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["edit-form-Interval-task.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit-form-Interval-task.vue","sourceRoot":"src/views/admin/monitor/celery/interval-task","sourcesContent":["<!--\n@author: xuchi\n@description: 接口编辑组件\n-->\n<template>\n  <small-dialog\n    ref=\"dialog\"\n    v-model=\"dialogVisible\"\n    :dialog-title=\"dialogTitle\"\n    :width=\"width\"\n    icon=\"svg:icon-interface\"\n    @confirm=\"handleSubmit\"\n    @closed=\"dialogClose\"\n    @opened=\"dialogOpen\"\n  >\n    <el-form ref=\"form\" v-loading=\"loading\" :model=\"form\" :size=\"$ELEMENT.size\" label-width=\"120px\">\n      <el-form-item v-show=\"false\" prop=\"instanceId\" label=\"instanceId\" style=\"width: 200px;\">\n        <el-input v-model=\"form.instanceId\" readonly />\n      </el-form-item>\n      <el-form-item prop=\"every\" label=\"频率:\">\n        <el-input-number v-model=\"form.every\" :min=\"1\" label=\"频率\" />\n      </el-form-item>\n      <el-form-item prop=\"period\" label=\"周期:\">\n        <el-select v-model=\"form.period\" placeholder=\"请选择\">\n          <el-option\n            v-for=\"(item,index) in lists\"\n            :key=\"index.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n    </el-form>\n  </small-dialog>\n</template>\n<script>\nimport * as SyncDataApi from \"@/api/admin/monitor/celery\";\n\nexport default {\n  props: {\n    entity: { type: Object, default: null },\n    value: { type: Boolean, default: null },\n    create: { type: Boolean, default: false },\n    width: { type: String, default: \"50%\" },\n    tags: { type: Array, default: () => [] }\n  },\n  data() {\n    return {\n      lists: [\n        { label: \"天\", value: \"days\" },\n        { label: \"小时\", value: \"hours\" },\n        { label: \"分钟\", value: \"minutes\" },\n        { label: \"秒\", value: \"seconds\" }\n      ],\n      loading: false,\n      dialogVisible: false,\n      form: {\n        instanceId: \"\",\n        every: 1,\n        period: \"\",\n        title: \"\"\n      }\n    };\n  },\n  computed: {\n    dialogTitle() {\n      return this.create ? \"新增任务频率\" : \"编辑任务频率\";\n    }\n  },\n  watch: {\n    value(val) {\n      this.dialogVisible = val;\n    },\n    dialogVisible(val) {\n      this.$emit(\"input\", val);\n    }\n  },\n  created() {\n  },\n  methods: {\n    dialogOpen() {\n      // 为True意味着是通过遍及方式打开对话框\n      if (!this.create) {\n        this.form = { ...this.entity };\n      }\n    },\n    handleSubmit() {\n      this.$refs[\"form\"].validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          const data = { ...this.form };\n          console.log(this.form);\n          if (this.create) {\n            delete data[\"instanceId\"];\n            SyncDataApi.createIntervalschedule(data).then(response => {\n              this.loading = false;\n              this.$emit(\"success\", response.data);\n              this.dialogClose();\n              this.msgSuccess(\"新增成功!\");\n            }).catch(() => {\n              this.loading = false;\n            });\n          } else {\n            SyncDataApi.updateIntervalschedule(data).then(response => {\n              this.$emit(\"success\", response.data);\n              this.loading = false;\n              this.msgSuccess(\"更新成功!\");\n              this.dialogClose();\n            }).catch(() => {\n              this.loading = false;\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    dialogClose() {\n      this.$refs[\"form\"].resetFields();\n      this.$parent.initData();\n      this.dialogVisible = false;\n    }\n  }\n};\n</script>\n\n"]}]}