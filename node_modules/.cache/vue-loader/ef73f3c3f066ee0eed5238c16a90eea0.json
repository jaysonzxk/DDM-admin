{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jayson/Desktop/work/DDM-admin/src/views/admin/tool/build/DraggableItem.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/views/admin/tool/build/DraggableItem.vue","mtime":1720245294027},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1720245293567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkcmFnZ2FibGUgZnJvbSAidnVlZHJhZ2dhYmxlIjsKaW1wb3J0IHJlbmRlciBmcm9tICJAL3V0aWxzL2dlbmVyYXRvci9yZW5kZXIiOwoKY29uc3QgY29tcG9uZW50cyA9IHsKICBpdGVtQnRucyhoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICBjb25zdCB7IGNvcHlJdGVtLCBkZWxldGVJdGVtIH0gPSB0aGlzLiRsaXN0ZW5lcnM7CiAgICByZXR1cm4gWwogICAgICA8c3BhbiBjbGFzcz0nZHJhd2luZy1pdGVtLWNvcHknIHRpdGxlPSflpI3liLYnIG9uQ2xpY2s9e2V2ZW50ID0+IHsKICAgICAgICBjb3B5SXRlbShlbGVtZW50LCBwYXJlbnQpOyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfX0+CiAgICAgICAgPGkgY2xhc3M9J2VsLWljb24tY29weS1kb2N1bWVudCcgLz4KICAgICAgPC9zcGFuPiwKICAgICAgPHNwYW4gY2xhc3M9J2RyYXdpbmctaXRlbS1kZWxldGUnIHRpdGxlPSfliKDpmaQnIG9uQ2xpY2s9e2V2ZW50ID0+IHsKICAgICAgICBkZWxldGVJdGVtKGluZGV4LCBwYXJlbnQpOyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfX0+CiAgICAgICAgPGkgY2xhc3M9J2VsLWljb24tZGVsZXRlJyAvPgogICAgICA8L3NwYW4+CiAgICBdOwogIH0KfTsKY29uc3QgbGF5b3V0cyA9IHsKICBjb2xGb3JtSXRlbShoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXMuJGxpc3RlbmVyczsKICAgIGxldCBjbGFzc05hbWUgPSB0aGlzLmFjdGl2ZUlkID09PSBlbGVtZW50LmZvcm1JZCA/ICJkcmF3aW5nLWl0ZW0gYWN0aXZlLWZyb20taXRlbSIgOiAiZHJhd2luZy1pdGVtIjsKICAgIGlmICh0aGlzLmZvcm1Db25mLnVuRm9jdXNlZENvbXBvbmVudEJvcmRlcikgY2xhc3NOYW1lICs9ICIgdW5mb2N1cy1ib3JkZXJlZCI7CiAgICByZXR1cm4gKAogICAgICA8ZWwtY29sIHNwYW49e2VsZW1lbnQuc3Bhbn0gY2xhc3M9e2NsYXNzTmFtZX0KICAgICAgICBuYXRpdmVPbkNsaWNrPXtldmVudCA9PiB7IGFjdGl2ZUl0ZW0oZWxlbWVudCk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyB9fT4KICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsLXdpZHRoPXtlbGVtZW50LmxhYmVsV2lkdGggPyBgJHtlbGVtZW50LmxhYmVsV2lkdGh9cHhgIDogbnVsbH0KICAgICAgICAgIGxhYmVsPXtlbGVtZW50LmxhYmVsfSByZXF1aXJlZD17ZWxlbWVudC5yZXF1aXJlZH0+CiAgICAgICAgICA8cmVuZGVyIGtleT17ZWxlbWVudC5yZW5kZXJLZXl9IGNvbmY9e2VsZW1lbnR9IG9uSW5wdXQ9eyBldmVudCA9PiB7CiAgICAgICAgICAgIHRoaXMuJHNldChlbGVtZW50LCAiZGVmYXVsdFZhbHVlIiwgZXZlbnQpOwogICAgICAgICAgfX0gLz4KICAgICAgICA8L2VsLWZvcm0taXRlbT4KICAgICAgICB7Y29tcG9uZW50cy5pdGVtQnRucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpfQogICAgICA8L2VsLWNvbD4KICAgICk7CiAgfSwKICByb3dGb3JtSXRlbShoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXMuJGxpc3RlbmVyczsKICAgIGNvbnN0IGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSWQgPT09IGVsZW1lbnQuZm9ybUlkID8gImRyYXdpbmctcm93LWl0ZW0gYWN0aXZlLWZyb20taXRlbSIgOiAiZHJhd2luZy1yb3ctaXRlbSI7CiAgICBsZXQgY2hpbGQgPSByZW5kZXJDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gImZsZXgiKSB7CiAgICAgIGNoaWxkID0gPGVsLXJvdyB0eXBlPXtlbGVtZW50LnR5cGV9IGp1c3RpZnk9e2VsZW1lbnQuanVzdGlmeX0gYWxpZ249e2VsZW1lbnQuYWxpZ259PgogICAgICAgIHtjaGlsZH0KICAgICAgPC9lbC1yb3c+OwogICAgfQogICAgcmV0dXJuICgKICAgICAgPGVsLWNvbCBzcGFuPXtlbGVtZW50LnNwYW59PgogICAgICAgIDxlbC1yb3cgZ3V0dGVyPXtlbGVtZW50Lmd1dHRlcn0gY2xhc3M9e2NsYXNzTmFtZX0KICAgICAgICAgIG5hdGl2ZU9uQ2xpY2s9e2V2ZW50ID0+IHsgYWN0aXZlSXRlbShlbGVtZW50KTsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IH19PgogICAgICAgICAgPHNwYW4gY2xhc3M9J2NvbXBvbmVudC1uYW1lJz57ZWxlbWVudC5jb21wb25lbnROYW1lfTwvc3Bhbj4KICAgICAgICAgIDxkcmFnZ2FibGUgbGlzdD17ZWxlbWVudC5jaGlsZHJlbn0gYW5pbWF0aW9uPXszNDB9IGdyb3VwPSdjb21wb25lbnRzR3JvdXAnIGNsYXNzPSdkcmFnLXdyYXBwZXInPgogICAgICAgICAgICB7Y2hpbGR9CiAgICAgICAgICA8L2RyYWdnYWJsZT4KICAgICAgICAgIHtjb21wb25lbnRzLml0ZW1CdG5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyl9CiAgICAgICAgPC9lbC1yb3c+CiAgICAgIDwvZWwtY29sPgogICAgKTsKICB9Cn07CgpmdW5jdGlvbiByZW5kZXJDaGlsZHJlbihoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgaWYgKCFBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pKSByZXR1cm4gbnVsbDsKICByZXR1cm4gZWxlbWVudC5jaGlsZHJlbi5tYXAoKGVsLCBpKSA9PiB7CiAgICBjb25zdCBsYXlvdXQgPSBsYXlvdXRzW2VsLmxheW91dF07CiAgICBpZiAobGF5b3V0KSB7CiAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCBlbCwgaSwgZWxlbWVudC5jaGlsZHJlbik7CiAgICB9CiAgICByZXR1cm4gbGF5b3V0SXNOb3RGb3VuZCgpOwogIH0pOwp9CgpmdW5jdGlvbiBsYXlvdXRJc05vdEZvdW5kKCkgewogIHRocm93IG5ldyBFcnJvcihg5rKh5pyJ5LiOJHt0aGlzLmVsZW1lbnQubGF5b3V0feWMuemFjeeahGxheW91dGApOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgcmVuZGVyLAogICAgZHJhZ2dhYmxlCiAgfSwKICBwcm9wczogWwogICAgImVsZW1lbnQiLAogICAgImluZGV4IiwKICAgICJkcmF3aW5nTGlzdCIsCiAgICAiYWN0aXZlSWQiLAogICAgImZvcm1Db25mIgogIF0sCiAgcmVuZGVyKGgpIHsKICAgIGNvbnN0IGxheW91dCA9IGxheW91dHNbdGhpcy5lbGVtZW50LmxheW91dF07CgogICAgaWYgKGxheW91dCkgewogICAgICByZXR1cm4gbGF5b3V0LmNhbGwodGhpcywgaCwgdGhpcy5lbGVtZW50LCB0aGlzLmluZGV4LCB0aGlzLmRyYXdpbmdMaXN0KTsKICAgIH0KICAgIHJldHVybiBsYXlvdXRJc05vdEZvdW5kKCk7CiAgfQp9Owo="},{"version":3,"sources":["DraggableItem.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"DraggableItem.vue","sourceRoot":"src/views/admin/tool/build","sourcesContent":["<script>\nimport draggable from \"vuedraggable\";\nimport render from \"@/utils/generator/render\";\n\nconst components = {\n  itemBtns(h, element, index, parent) {\n    const { copyItem, deleteItem } = this.$listeners;\n    return [\n      <span class='drawing-item-copy' title='复制' onClick={event => {\n        copyItem(element, parent); event.stopPropagation();\n      }}>\n        <i class='el-icon-copy-document' />\n      </span>,\n      <span class='drawing-item-delete' title='删除' onClick={event => {\n        deleteItem(index, parent); event.stopPropagation();\n      }}>\n        <i class='el-icon-delete' />\n      </span>\n    ];\n  }\n};\nconst layouts = {\n  colFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners;\n    let className = this.activeId === element.formId ? \"drawing-item active-from-item\" : \"drawing-item\";\n    if (this.formConf.unFocusedComponentBorder) className += \" unfocus-bordered\";\n    return (\n      <el-col span={element.span} class={className}\n        nativeOnClick={event => { activeItem(element); event.stopPropagation(); }}>\n        <el-form-item label-width={element.labelWidth ? `${element.labelWidth}px` : null}\n          label={element.label} required={element.required}>\n          <render key={element.renderKey} conf={element} onInput={ event => {\n            this.$set(element, \"defaultValue\", event);\n          }} />\n        </el-form-item>\n        {components.itemBtns.apply(this, arguments)}\n      </el-col>\n    );\n  },\n  rowFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners;\n    const className = this.activeId === element.formId ? \"drawing-row-item active-from-item\" : \"drawing-row-item\";\n    let child = renderChildren.apply(this, arguments);\n    if (element.type === \"flex\") {\n      child = <el-row type={element.type} justify={element.justify} align={element.align}>\n        {child}\n      </el-row>;\n    }\n    return (\n      <el-col span={element.span}>\n        <el-row gutter={element.gutter} class={className}\n          nativeOnClick={event => { activeItem(element); event.stopPropagation(); }}>\n          <span class='component-name'>{element.componentName}</span>\n          <draggable list={element.children} animation={340} group='componentsGroup' class='drag-wrapper'>\n            {child}\n          </draggable>\n          {components.itemBtns.apply(this, arguments)}\n        </el-row>\n      </el-col>\n    );\n  }\n};\n\nfunction renderChildren(h, element, index, parent) {\n  if (!Array.isArray(element.children)) return null;\n  return element.children.map((el, i) => {\n    const layout = layouts[el.layout];\n    if (layout) {\n      return layout.call(this, h, el, i, element.children);\n    }\n    return layoutIsNotFound();\n  });\n}\n\nfunction layoutIsNotFound() {\n  throw new Error(`没有与${this.element.layout}匹配的layout`);\n}\n\nexport default {\n  components: {\n    render,\n    draggable\n  },\n  props: [\n    \"element\",\n    \"index\",\n    \"drawingList\",\n    \"activeId\",\n    \"formConf\"\n  ],\n  render(h) {\n    const layout = layouts[this.element.layout];\n\n    if (layout) {\n      return layout.call(this, h, this.element, this.index, this.drawingList);\n    }\n    return layoutIsNotFound();\n  }\n};\n</script>\n"]}]}