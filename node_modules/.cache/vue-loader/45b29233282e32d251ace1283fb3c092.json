{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jayson/Desktop/work/DDM-admin/src/views/admin/system/message/Mymessage.vue?vue&type=style&index=0&id=1d799ead&scoped=true&lang=css","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/views/admin/system/message/Mymessage.vue","mtime":1720245294026},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/css-loader/dist/cjs.js","mtime":1720245289027},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1720245293567},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/postcss-loader/src/index.js","mtime":1720245291982},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1720245293567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmFwcC1jb250YWluZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNmNWY3Zjk7Cn0KCi5tZXNzYWdlLWNhdGVnb3J5LWNvbiB7CiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2U2ZTZlNjsKICB3aWR0aDogMjAwcHg7Cn0KCi5tZXNzYWdlLXBhZ2UtY29uIHsKICBoZWlnaHQ6IGNhbGMoMTAwdmggLSAxNzZweCk7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiB0b3A7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgouY2F0ZWdvcnktdGl0bGUgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB3aWR0aDogNjVweDsKfQoKLm1lc3NhZ2UtbGlzdC1jb24gewogIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlNmU2ZTY7CiAgd2lkdGg6IDIzMHB4Owp9CgoubXNnLXRpdGxlIHsKICB3b3JkLWJyZWFrOiBicmVhay1hbGw7CiAgd2hpdGUtc3BhY2U6IG5vcm1hbDsKICBsaW5lLWhlaWdodDogMTVweDsKICBjb2xvcjogcmdiKDE3MCwgMTY5LCAxNjkpOwp9CgoubWVzc2FnZS1saXN0LWNvbiAuZWwtbWVudS1pdGVtIHsKICBoZWlnaHQ6IDgwcHg7CiAgcGFkZGluZy10b3A6IDVweDsKfQoKLml0ZW0gewogIG1hcmdpbi1yaWdodDogMTBweDsKICBtYXJnaW4tYm90dG9tOiA1cHg7Cn0KCi5tZXNzYWdlLXZpZXctY29uIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgbGVmdDogNDg2cHg7CiAgdG9wOiAxNnB4OwogIHJpZ2h0OiAxNnB4OwogIGJvdHRvbTogMTZweDsKICBvdmVyZmxvdzogYXV0bzsKICBwYWRkaW5nOiAxMnB4IDIwcHggMDsKCn0KCi5tZXNzYWdlLXZpZXctaGVhZGVyIHsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwoKfQoKLm1lc3NhZ2Utdmlldy10aXRsZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CgoubWVzc2FnZS12aWV3LXRpbWUgewogIG1hcmdpbi1sZWZ0OiAyMHB4Owp9Cg=="},{"version":3,"sources":["Mymessage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"Mymessage.vue","sourceRoot":"src/views/admin/system/message","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card shadow=\"never\">\n      <div class=\"message-page-con message-category-con\">\n        <el-menu\n          default-active=\"1\"\n          class=\"el-menu-vertical-demo\"\n          @select=\"handleSelect\"\n        >\n          <el-menu-item index=\"1\">\n            <template slot=\"title\">\n              <span class=\"category-title\">未读消息</span>\n              <el-badge style=\"margin-bottom: 3px\" :value=\"countUnread\" :hidden=\"countUnread===0\" />\n            </template>\n          </el-menu-item>\n          <el-menu-item index=\"2\">\n            <span class=\"category-title\">已读消息</span>\n            <el-badge style=\"margin-bottom: 3px\" type=\"info\" :value=\"countReaded\" />\n          </el-menu-item>\n        </el-menu>\n      </div>\n      <div class=\"message-page-con message-list-con\">\n        <el-menu\n          default-active=\"2\"\n          class=\"el-menu-vertical-demo\"\n          @select=\"handleListSelect\"\n        >\n          <el-menu-item v-for=\"(item,index) in messageList\" :key=\"index\" :index=\"index.toString()\">\n            <template slot=\"title\">\n              <div style=\"line-height: 10px!important;height: 20px;\">\n                <p class=\"msg-title\">{{ item.title }}</p>\n                <el-badge is-dot class=\"item\" :type=\"badgeType\" />\n                {{ item.create_datetime }}\n\n              </div>\n            </template>\n          </el-menu-item>\n        </el-menu>\n      </div>\n      <div class=\"message-page-con message-view-con\">\n        <div class=\"message-view-header\">\n          <h2 class=\"message-view-title\">{{ showingMsgItem.title }}</h2>\n          <time class=\"message-view-time\">{{ showingMsgItem.create_datetime }}</time>\n        </div>\n        <div v-html=\"showingMsgItem.content\" />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { updateIsRead, userMessage } from \"@/api/admin/system/message\";\nimport store from \"@/store\";\n\nexport default {\n  name: \"Mymessage\",\n  data() {\n    return {\n      // 查询通知\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10\n      },\n      messageList: [],\n      // 已读通知\n      countReaded: 0,\n      messageReadedList: [],\n      // 未读消息列表\n      messageUnreadList: [],\n      countUnread: 0,\n      badgeType: \"danger\",\n      // 选中查询后的详细信息\n      showingMsgItem: {}\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    /** 查询通知列表 */\n    getList() {\n      // 已读通知列表\n      userMessage(this.addDateRange({ ...this.queryParams, is_read: \"True\" })).then(response => {\n        this.messageReadedList = response.data.results;\n        this.countReaded = response.data.count;\n      }\n      );\n      // 未读通知列表\n      userMessage(this.addDateRange({ ...this.queryParams, is_read: \"False\" })).then(response => {\n        this.messageUnreadList = response.data.results;\n        this.countUnread = response.data.count;\n        this.messageList = this.messageUnreadList;\n      }\n      );\n    },\n    handleSelect(key, keyPath) {\n      this.messageList = key[0] === \"1\" ? this.messageUnreadList : this.messageReadedList;\n      this.badgeType = key[0] === \"1\" ? \"danger\" : \"info\";\n    },\n    // 通知列表激活后\n    handleListSelect(key, keyPath) {\n      this.showingMsgItem = this.messageList[key[0]];\n      // 修改通知查询状态\n      if (this.badgeType === \"danger\") {\n        updateIsRead(this.showingMsgItem).then(response => {\n          if (response.code === 200) {\n            store.commit(\"SET_UNREAD_MSG_COUNT\", store.getters.unread_msg_count - 1);\n            this.open = false;\n            this.getList();\n          }\n        });\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n  .app-container {\n    background-color: #f5f7f9;\n  }\n\n  .message-category-con {\n    border-right: 1px solid #e6e6e6;\n    width: 200px;\n  }\n\n  .message-page-con {\n    height: calc(100vh - 176px);\n    display: inline-block;\n    vertical-align: top;\n    position: relative;\n  }\n\n  .category-title {\n    display: inline-block;\n    width: 65px;\n  }\n\n  .message-list-con {\n    border-right: 1px solid #e6e6e6;\n    width: 230px;\n  }\n\n  .msg-title {\n    word-break: break-all;\n    white-space: normal;\n    line-height: 15px;\n    color: rgb(170, 169, 169);\n  }\n\n  .message-list-con .el-menu-item {\n    height: 80px;\n    padding-top: 5px;\n  }\n\n  .item {\n    margin-right: 10px;\n    margin-bottom: 5px;\n  }\n\n  .message-view-con {\n    position: absolute;\n    left: 486px;\n    top: 16px;\n    right: 16px;\n    bottom: 16px;\n    overflow: auto;\n    padding: 12px 20px 0;\n\n  }\n\n  .message-view-header {\n    margin-bottom: 20px;\n\n  }\n\n  .message-view-title {\n    display: inline-block;\n  }\n\n  .message-view-time {\n    margin-left: 20px;\n  }\n</style>\n"]}]}