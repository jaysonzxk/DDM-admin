{"remainingRequest":"/Users/mac/Desktop/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/DDM-admin/src/components/ModelDisplay/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mac/Desktop/DDM-admin/src/components/ModelDisplay/index.vue","mtime":1702065174000},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1703645363792},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1703645364828},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1703645363792},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1703645365038}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAiQC91dGlscyI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKaW1wb3J0IE1vZGVsU2VsZWN0IGZyb20gIi4uL01vZGVsU2VsZWN0L2luZGV4IjsKaW1wb3J0IHsgbGlzdFVzZXIgfSBmcm9tICJAL2FwaS9hZG1pbi9wZXJtaXNzaW9uL3VzZXIiOwppbXBvcnQgeyB0cmVlc2VsZWN0IH0gZnJvbSAiQC9hcGkvYWRtaW4vcGVybWlzc2lvbi9kZXB0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb2RlbERpc3BsYXkiLAogIGNvbXBvbmVudHM6IHsgTW9kZWxTZWxlY3QgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgLy8gdGFibGXnmoREYXRhCiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfSwKICAgIHNwYW5NZXRob2Q6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdnVlL3JlcXVpcmUtcHJvcC10eXBlcwogICAgbWF4SGVpZ2h0OiB7CiAgICAgIGRlZmF1bHQ6IDcwMAogICAgfSwKICAgIHN0cmlwZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g5piv5ZCm5Y+v5Lul6YCa6L+H54K55Ye7IOeql+WPo+WkliDlhbPpl60gRGlhbG9nCiAgICBjbG9zZV9vbl9jbGlja19tb2RhbDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgZml0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBoaWdobGlnaHRDdXJyZW50Um93OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzaG93T3ZlcmZsb3dUb29sdGlwOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBib3JkZXI6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBlbXB0eVRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAi5pqC5peg5pWw5o2uIgogICAgfSwKICAgIHBhZ2luYXRpb25QYXJhbXM6IHsKICAgICAgLy8g5paw5aKe44CC5YiG6aG15Y+C5pWwLCDlvZPliIbpobXmoLzlvI/ov5Tlm57nmoTlsZ7mgKflkI3np7DkuI3lkIzkvb/nlKgsIOWPr+S9v+eUqOivpeWxnuaAp+imhueblum7mOiupOWIhumhteWxnuaAp+WQjeensAogICAgICAvLyDkvovlpoI6eyBwYWdlOiAncGFnZScsIHBhZ2VTaXplOiAncGFnZVNpemUnLCBjb3VudDogJ3RvdGFsJyxyZXN1bHRzOiAnbGlzdCcgfQogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcGFnZTogInBhZ2VOdW0iLAogICAgICAgICAgcGFnZVNpemU6ICJwYWdlU2l6ZSIsCiAgICAgICAgICBjb3VudDogImNvdW50IiwKICAgICAgICAgIHJlc3VsdHM6ICJyZXN1bHRzIgogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBsaXN0QXBpOiB7CiAgICAgIC8vIOeUqOS6juabv+aNom1ldGhvZCArIHVybOWxnuaApwogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHRvcExheW91dDogewogICAgICAvLyDnlKjkuo7mjqfliLbooajmoLzpobbpg6jnmoTmjInpkq7jgIHlt6XlhbfnmoTmmL7npLrjgILpu5jorqTlt6blj7PnmoTmjInpkq7jgIHlip/og73pg73mmL7npLoKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gWyJsZWZ0IiwgInJpZ2h0Il07CiAgICAgIH0KICAgIH0sCiAgICBmaWVsZHM6IHsKICAgICAgLy8g5ZCO56uv6L+U5Zue55qE5a2X5q61CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgZnVuY3M6IHsKICAgICAgLy8g6I+c5Y2V6YWN572u5a2X5q61CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0aW9uOiB7CiAgICAgIC8vIOW8gOWni+W8gOWQr+WkmumAiSjpu5jorqTlvIDlkK8sIHRydWUpCiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBwYXJhbXM6IHsKICAgICAgLy8g5Z+65pys6K+35rGC5Y+C5pWwLOacgOe7iOivt+axguWPguaVsD3ln7rmnKzlj4LmlbAr5Z+65pys6auY57qn5pCc57Si5Y+C5pWwK+e7hOS7tuWwgeijheeahOWfuuacrOWPguaVsCvnp5/ph5Hnu4Tku7blsIHoo4XnmoTpq5jnuqfmkJzntKLlj4LmlbAKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgLy8g6buY6K6k5YiG6aG15qC35byPCiAgICBwYWdpbmF0aW9uU3R5bGU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgLy8g6buY6K6k6aG16Z2i5aSn5bCPCiAgICBwYWdlU2l6ZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gWzEwLCAyMCwgNTAsIDEwMCwgNTAwXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dGaWVsZHM6IFtdLCAvLyDmmL7npLrnmoTlrZfmrrUKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIHNlYXJjaDogIiIsCiAgICAgICAgb3JkZXJpbmc6ICIiCiAgICAgIH0sCiAgICAgIHF1ZXJ5UGFyYW1zOiB7fSwKICAgICAgdGFibGVMb2FkaW5nOiBmYWxzZSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgcm93S2V5OiAiIiwKICAgICAgZGF0ZVJhbmdlOiBbXSwKICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLAogICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBwYWdlX3NpemU6IDEwLAogICAgICAgIHRvdGFsOiAwCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgcnVsZXM6IHRoaXMuZ2V0Rm9ybVJ1bGVzKCksCiAgICAgIG9wZW46IGZhbHNlLAogICAgICAvLyDmj5DkuqTml7ZhcGkKICAgICAgc3VibWl0Rm9ybUFwaTogIiIsCiAgICAgIC8vIOWNleS4quafpeivomFwaQogICAgICBzZWxlY3RBcGk6ICIiLAogICAgICAvLyDlr7zlhaVhcGkKICAgICAgaW1wb3J0QXBpOiAiIiwKICAgICAgRGljdHNPcHRpb25zOiB7fSwKICAgICAgbW9kZWxTZWxlY3Q6IHt9LAogICAgICBnZXRSb3dLZXlzOiByb3cgPT4gewogICAgICAgIGlmICh0aGlzLnJvd0tleSkgewogICAgICAgICAgcmV0dXJuIHJvd1t0aGlzLnJvd0tleV07CiAgICAgICAgfQogICAgICAgIHJldHVybiByb3cuaWQgfHwgcm93LnV1aWQ7CiAgICAgIH0sCiAgICAgIHRpdGxlOiAiIiwKICAgICAgLy8g55So5oi35a+85YWl5Y+C5pWwCiAgICAgIHVwbG9hZDogewogICAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxgu+8iOeUqOaIt+WvvOWFpe+8iQogICAgICAgIG9wZW46IGZhbHNlLAogICAgICAgIC8vIOW8ueWHuuWxguagh+mimO+8iOeUqOaIt+WvvOWFpe+8iQogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAvLyDmmK/lkKbnpoHnlKjkuIrkvKAKICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsCiAgICAgICAgLy8g5piv5ZCm5pu05paw5bey57uP5a2Y5Zyo55qE55So5oi35pWw5o2uCiAgICAgICAgdXBkYXRlU3VwcG9ydDogMCwKICAgICAgICAvLyDorr7nva7kuIrkvKDnmoTor7fmsYLlpLTpg6gKICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGdldFRva2VuKCkgfSwKICAgICAgICAvLyDkuIrkvKDnmoTlnLDlnYAKICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL2FkbWluL3N5c3RlbS9zYXZlZmlsZS8iCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdG9wTGF5b3V0TGVmdCgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9wTGF5b3V0LmluZGV4T2YoImxlZnQiKSA+PSAwOwogICAgfSwKICAgIHRvcExheW91dFJpZ2h0KCkgewogICAgICByZXR1cm4gdGhpcy50b3BMYXlvdXQuaW5kZXhPZigicmlnaHQiKSA+PSAwOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHBhcmFtczogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdENvbXBvbmVudERhdGEoKTsKICAgIHRoaXMuaW5pdE9wdGlvbnMoKTsKICAgIHRoaXMuZ2V0T3BlcmF0aW9uUGVybWlzKCk7CiAgICAvLyB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgdGhpcy5mdW5jcy5tYXAodmFsdWUgPT4gewogICAgICBpZiAodmFsdWUudHlwZSA9PT0gInNlbGVjdCIpIHsKICAgICAgICB0aGlzLnNlbGVjdEFwaSA9IHZhbHVlLmFwaTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0Q29tcG9uZW50RGF0YSgpIHsKICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2Vfc2l6ZSA9IHRoaXMucGFnZVNpemVzWzBdOwogICAgICB0aGlzLmZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHsKICAgICAgICBmaWVsZC5zaG93ID0gKCEhZmllbGQuc2hvdyk7CiAgICAgICAgZmllbGQudHlwZSA9IChmaWVsZC50eXBlIHx8ICJzdHJpbmciKS50b0xvY2FsZUxvd2VyQ2FzZSgpOwogICAgICAgIGlmIChmaWVsZC50eXBlLnN0YXJ0c1dpdGgoImJvb2wiKSkgewogICAgICAgICAgZmllbGQudHlwZSA9ICJib29sZWFuIjsKICAgICAgICB9CiAgICAgICAgZmllbGQubGFiZWwgPSBmaWVsZC5sYWJlbCB8fCBmaWVsZC5wcm9wOwogICAgICAgIGZpZWxkLnNlYXJjaCA9ICghIWZpZWxkLnNlYXJjaCk7CiAgICAgICAgZmllbGQuc29ydGFibGUgPSAoISFmaWVsZC5zb3J0YWJsZSk7CiAgICAgICAgaWYgKGZpZWxkLm9yZGVyaW5nICYmIGZpZWxkLm9yZGVyaW5nLnN0YXJ0c1dpdGgoImRlc2MiKSkgewogICAgICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyaW5nID0gYC0ke2ZpZWxkLnByb3B9YDsKICAgICAgICB9IGVsc2UgaWYgKGZpZWxkLm9yZGVyaW5nICYmIGZpZWxkLm9yZGVyaW5nLnN0YXJ0c1dpdGgoImFzYyIpKSB7CiAgICAgICAgICB0aGlzLnNlYXJjaEZvcm0ub3JkZXJpbmcgPSBgJHtmaWVsZC5wcm9wfWA7CiAgICAgICAgfQogICAgICAgIGZpZWxkLndpZHRoID0gZmllbGQud2lkdGggfHwgIiI7CiAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICJjaG9pY2VzIikgewogICAgICAgICAgaWYgKFV0aWxzLmlzQXJyYXkoZmllbGQuY2hvaWNlcykgJiYgZmllbGQuY2hvaWNlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGlmICghVXRpbHMuaXNPYmooZmllbGQuY2hvaWNlc1swXSkpIHsKICAgICAgICAgICAgICBmaWVsZC5jaG9pY2VzID0gZmllbGQuY2hvaWNlcy5tYXAodmFsdWUgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgbGFiZWw6IHZhbHVlLAogICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZmllbGQudW5pcXVlID0gKCEhZmllbGQudW5pcXVlKTsKICAgICAgICBpZiAoZmllbGQudW5pcXVlKSB7CiAgICAgICAgICB0aGlzLnJvd0tleSA9IGZpZWxkLnByb3A7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRDb2x1bW5EYXRhKHJvdywgZmllbGQpIHsKICAgICAgY29uc3QgdHlwZSA9IGZpZWxkLnR5cGUgfHwgInN0cmluZyI7CiAgICAgIGNvbnN0IHByb3AgPSBmaWVsZC5wcm9wOwogICAgICBpZiAoZmllbGQuZm9ybWF0dGVyICYmIHR5cGVvZiBmaWVsZC5mb3JtYXR0ZXIgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZXR1cm4gZmllbGQuZm9ybWF0dGVyKHJvdywgcHJvcCwgdHlwZSk7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICJzdHJpbmciKSB7CiAgICAgICAgcmV0dXJuIHJvd1twcm9wXTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiZGF0ZXRpbWUiKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZXRpbWUocm93W3Byb3BdKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiZGF0ZSIpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKHJvd1twcm9wXSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gInRpbWUiKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGltZShyb3dbcHJvcF0pOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJvcHRpb24iKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0T3B0aW9ucyhmaWVsZC5vcHRpb25fa2V5LCByb3dbcHJvcF0pOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJ1c2VycyIpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTZWxlY3Qocm93W3Byb3BdLCBwcm9wKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiZGVwdHMiKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U2VsZWN0KHJvd1twcm9wXSwgcHJvcCk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gIm1vZGVsX3NlbGVjdCIpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTZWxlY3Qocm93W3Byb3BdLCBwcm9wKTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnN0YXJ0c1dpdGgoImJvb2wiKSkgewogICAgICAgIHJldHVybiByb3dbcHJvcF0gPyAi5pivIiA6ICLlkKYiOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJjaG9pY2VzIikgewogICAgICAgIGNvbnN0IGNob2ljZXMgPSBmaWVsZC5jaG9pY2VzOwogICAgICAgIHJldHVybiB0aGlzLmZvcm1hdENob2ljZXMoY2hvaWNlcywgcm93W3Byb3BdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcm93W3Byb3BdOwogICAgICB9CiAgICB9LAogICAgZm9ybWF0Q2hvaWNlcyhjaG9pY2VzLCB2YWx1ZSkgewogICAgICBmb3IgKGNvbnN0IGNob2ljZSBvZiBjaG9pY2VzKSB7CiAgICAgICAgaWYgKGNob2ljZS52YWx1ZSA9PT0gdmFsdWUpIHsKICAgICAgICAgIHJldHVybiBjaG9pY2UubGFiZWw7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0sCiAgICBmb3JtYXREYXRldGltZShkYXRldGltZSkgewogICAgICByZXR1cm4gbW9tZW50KGRhdGV0aW1lKS5mb3JtYXQoIllZWVktTU0tREQgSEg6bW06c3MiKTsKICAgIH0sCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgIH0sCiAgICBmb3JtYXRUaW1lKHRpbWUpIHsKICAgICAgcmV0dXJuIG1vbWVudCh0aW1lKS5mb3JtYXQoIkhIOm1tOnNzIik7CiAgICB9LAogICAgZm9ybWF0T3B0aW9ucyhvcHRpb25fa2V5LCBpZCkgewogICAgICB2YXIgZGF0YSA9IHRoaXMuRGljdHNPcHRpb25zW29wdGlvbl9rZXldOwogICAgICBpZiAoaWQgPT09IG51bGwgfHwgIWRhdGEpIHJldHVybiAiIjsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGRhdGFbaV0uZGljdFZhbHVlID09PSBpZCkgewogICAgICAgICAgcmV0dXJuIGRhdGFbaV0uZGljdExhYmVsOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgZm9ybWF0U2VsZWN0KGlkLCBwcm9wKSB7CiAgICAgIHZhciBkYXRhID0gdGhpcy5tb2RlbFNlbGVjdFtwcm9wXTsKICAgICAgaWYgKCFpZCB8fCAhZGF0YSkgcmV0dXJuICIiOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoZGF0YVtpXS5pZCA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBkYXRhW2ldLmxhYmVsOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgZ2V0VGFibGVEYXRhKCkgewogICAgICB0aGlzLmxpc3RJbnRlcmZhY2VEYXRhKHRoaXMuZ2V0UmVxdWVzdFBhcmFtcygpKTsKICAgICAgcmV0dXJuIHRoaXMudGFibGVEYXRhOwogICAgfSwKICAgIGdldEZvcm1hdHRlZFBhZ2luYXRpb25QYXJhbXMoKSB7CiAgICAgIGNvbnN0IHBhZ2VQYXJhbU5hbWUgPSB0aGlzLnBhZ2luYXRpb25QYXJhbXMucGFnZTsKICAgICAgY29uc3QgcGFnZVNpemVQYXJhbU5hbWUgPSB0aGlzLnBhZ2luYXRpb25QYXJhbXMucGFnZVNpemU7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHt9OwogICAgICBwYXJhbXNbcGFnZVBhcmFtTmFtZV0gPSB0aGlzLnBhZ2luYXRpb24ucGFnZTsKICAgICAgcGFyYW1zW3BhZ2VTaXplUGFyYW1OYW1lXSA9IHRoaXMucGFnaW5hdGlvbi5wYWdlX3NpemU7CiAgICAgIHJldHVybiBwYXJhbXM7CiAgICB9LAogICAgLy8g5qC55o2u5pCc57Si5qGG55qE5YaF5a65LCDnu4Too4Xor7fmsYLlj4LmlbAKICAgIGdldFJlcXVlc3RQYXJhbXMoKSB7CiAgICAgIC8vIOe7hOijheWIhumhteWPguaVsOOAgemrmOe6p+aQnOe0ouWPguaVsAogICAgICBjb25zdCB0bXBQYXJhbXMgPSB7IC4uLnRoaXMucGFyYW1zLCAuLi50aGlzLmdldEZvcm1hdHRlZFBhZ2luYXRpb25QYXJhbXMoKSwgLi4udGhpcy5xdWVyeVBhcmFtcyB9OwogICAgICBjb25zdCBwYXJhbXMgPSB7fTsKICAgICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKHRtcFBhcmFtcykpIHsKICAgICAgICBpZiAodG1wUGFyYW1zW3Byb3BdKSB7CiAgICAgICAgICBwYXJhbXNbcHJvcF0gPSB0bXBQYXJhbXNbcHJvcF07CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIOe7hOijheaZrumBjeaooeeziuaQnOe0oueahOWPguaVsAogICAgICBpZiAodGhpcy5zZWFyY2hGb3JtLnNlYXJjaCkgewogICAgICAgIHBhcmFtc1sic2VhcmNoIl0gPSB0aGlzLnNlYXJjaEZvcm0uc2VhcmNoOwogICAgICB9CiAgICAgIC8vIOe7hOijheaZrumBjeaOkuW6j+aQnOe0oueahOWPguaVsAogICAgICBpZiAodGhpcy5zZWFyY2hGb3JtLm9yZGVyaW5nKSB7CiAgICAgICAgcGFyYW1zWyJvcmRlcmluZyJdID0gdGhpcy5zZWFyY2hGb3JtLm9yZGVyaW5nOwogICAgICB9CiAgICAgIC8vIGNvbnNvbGUuZGlyKHBhcmFtcyk7CiAgICAgIHJldHVybiB0aGlzLmFkZERhdGVSYW5nZShwYXJhbXMsIHRoaXMuZGF0ZVJhbmdlKTsKICAgIH0sCiAgICAvLyDlsIHoo4XlkI7nq6/mjqXlj6MsIOWQjuerr+aOpeWPo+i/lOWbnuaVsOaNruW/hemhu+inhOiMg+S4gOiHtAogICAgbGlzdEludGVyZmFjZURhdGEocGFyYW1zKSB7CiAgICAgIHRoaXMudGFibGVMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5saXN0QXBpKHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy50YWJsZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAic3VjY2VzcyIpIHsKICAgICAgICAgIGNvbnN0IHJlc3VsdHNQYXJhbU5hbWUgPSB0aGlzLnBhZ2luYXRpb25QYXJhbXMucmVzdWx0czsKICAgICAgICAgIGNvbnN0IGNvdW50UGFyYW1OYW1lID0gdGhpcy5wYWdpbmF0aW9uUGFyYW1zLmNvdW50OwogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhW3Jlc3VsdHNQYXJhbU5hbWVdIHx8IFtdOwogICAgICAgICAgdGhpcy5wYWdpbmF0aW9uLnRvdGFsID0gcmVzcG9uc2UuZGF0YVtjb3VudFBhcmFtTmFtZV0gfHwgMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKHJlc3BvbnNlLm1zZyB8fCAi6I635Y+W5o6l5Y+j5L+h5oGv5aSx6LSlISIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMudGFibGVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDmuIXnqbrlt7LpgInmi6kgKi8KICAgIGNsZWFyTXVsdGlwbGVTZWxlY3Rpb24oKSB7CiAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTsKICAgIH0sCiAgICAvKiog5riF56m65bey6YCJ5oupICovCiAgICBjbGVhclNlbGVjdGlvbigpIHsKICAgICAgdGhpcy4kcmVmcy50YWJsZURhdGEuY2xlYXJTZWxlY3Rpb24oKTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RGaWVsZChlLCBmaWVsZCkgewogICAgICBmaWVsZC5zaG93ID0gZTsKICAgIH0sCiAgICAvLyDlpITnkIbmj5DkuqTooajljZUsIOeCueWHu+aQnOe0ouaMiemSruS6i+S7tgogICAgaGFuZGxlU2VhcmNoRm9ybVN1Ym1pdCgpIHsKICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgfSwKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVF1ZXJ5KCkgewogICAgICB0aGlzLnBhZ2luYXRpb24ucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLwogICAgcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBbXTsKICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IHt9OwogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7CiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgIH0sCiAgICAvKiog5Yid5aeL5YyWIE9wdGlvbnMgKi8KICAgIGluaXRPcHRpb25zKCkgewogICAgICBjb25zdCBQcm9taXNlcyA9IFtdOwogICAgICB0aGlzLmZpZWxkcy5tYXAodmFsdWUgPT4gewogICAgICAgIGlmICh2YWx1ZS5vcHRpb25fa2V5KSB7CiAgICAgICAgICBQcm9taXNlcy5wdXNoKHRoaXMuZ2V0RGljdHModmFsdWUub3B0aW9uX2tleSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuRGljdHNPcHRpb25zW3ZhbHVlLm9wdGlvbl9rZXldID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICJtb2RlbF9zZWxlY3QiICYmIHZhbHVlLnNlbGVjdF9kYXRhKSB7CiAgICAgICAgICBQcm9taXNlcy5wdXNoKHRoaXMuZ2V0TW9kZWxTZWxlY3QodmFsdWUucHJvcCwgdmFsdWUuc2VsZWN0X2RhdGEubGFiZWxfbmFtZSwgdmFsdWUuc2VsZWN0X2RhdGEubGlzdEFwaSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMubW9kZWxTZWxlY3RbdmFsdWUucHJvcF0gPSByZXNwb25zZTsKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICJjYXNjYWRlciIgJiYgdmFsdWUuc2VsZWN0X2RhdGEpIHsKICAgICAgICAgIFByb21pc2VzLnB1c2godmFsdWUuc2VsZWN0X2RhdGEubGlzdEFwaSgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLm1vZGVsU2VsZWN0W3ZhbHVlLnByb3BdID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICJ1c2VycyIpIHsKICAgICAgICAgIFByb21pc2VzLnB1c2godGhpcy5nZXRNb2RlbFNlbGVjdCh2YWx1ZS5wcm9wLCAibmFtZSIsIGxpc3RVc2VyLCB7IF9maWVsZHM6ICJpZCxuYW1lIiB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5tb2RlbFNlbGVjdFt2YWx1ZS5wcm9wXSA9IHJlc3BvbnNlOwogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgICBpZiAodmFsdWUudHlwZSA9PT0gImRlcHRzIikgewogICAgICAgICAgUHJvbWlzZXMucHVzaCh0aGlzLmdldE1vZGVsU2VsZWN0KHZhbHVlLnByb3AsICJsYWJlbCIsIHRyZWVzZWxlY3QpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLm1vZGVsU2VsZWN0W3ZhbHVlLnByb3BdID0gcmVzcG9uc2U7CiAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgUHJvbWlzZS5hbGwoUHJvbWlzZXMpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWkhOeQhuS/ruaUueWkmumAieeahOWAvAogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLiRlbWl0KCJzZWxlY3Rpb24tY2hhbmdlIiwgdmFsKTsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbDsKICAgIH0sCiAgICAvLyDlpITnkIbkv67mlLnooajmoLzliIbpobXlmajnmoTpobXpnaLlpKflsI8o5YaN5qyh6I635Y+W5o6l5Y+j5pWw5o2uKQogICAgaGFuZGxlQ2hhbmdlUGFnZVNpemUodmFsKSB7CiAgICAgIHRoaXMucGFnaW5hdGlvbi5wYWdlX3NpemUgPSB2YWw7CiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogICAgLy8g5aSE55CG5L+u5pS56KGo5qC85YiG6aG15Zmo55qE6aG156CBKOWGjeasoeiOt+WPluaOpeWPo+aVsOaNrikKICAgIGhhbmRsZUNoYW5nZUN1cnJlbnRQYWdlKHZhbCkgewogICAgICB0aGlzLnBhZ2luYXRpb24ucGFnZSA9IHZhbDsKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIH0sCiAgICBoYW5kbGVTb3J0Q2hhbmdlKGluZm8pIHsKICAgICAgY29uc3QgeyBwcm9wLCBvcmRlciB9ID0gaW5mbzsKICAgICAgaWYgKCFvcmRlcikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5vcmRlcmluZyA9ICIiOwogICAgICB9IGVsc2UgaWYgKG9yZGVyLnN0YXJ0c1dpdGgoImRlc2MiKSkgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5vcmRlcmluZyA9IGAtJHtwcm9wfWA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyaW5nID0gYCR7cHJvcH1gOwogICAgICB9CiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICB9LAogICAgaGFuZGxlQ2VsbENsaWNrKHJvdywgY29sdW1uLCBjZWxsLCBldmVudCkgewogICAgICB0aGlzLiRlbWl0KCJjZWxsLWNsaWNrIiwgcm93LCBjb2x1bW4sIGNlbGwsIGV2ZW50KTsKICAgIH0sCiAgICBoYW5kbGVDZWxsRGJDbGljayhyb3csIGNvbHVtbiwgY2VsbCwgZXZlbnQpIHsKICAgICAgdGhpcy4kZW1pdCgiY2VsbC1kYmxjbGljayIsIHJvdywgY29sdW1uLCBjZWxsLCBldmVudCk7CiAgICB9LAogICAgaGFuZGxlUm93Q2xpY2socm93LCBjb2x1bW4sIGV2ZW50KSB7CiAgICAgIHRoaXMuJGVtaXQoInJvdy1jbGljayIsIHJvdywgY29sdW1uLCBldmVudCk7CiAgICB9LAogICAgaGFuZGxlUm93RGJsQ2xpY2socm93LCBjb2x1bW4sIGV2ZW50KSB7CiAgICAgIHRoaXMuJGVtaXQoInJvdy1kYmxjbGljayIsIHJvdywgY29sdW1uLCBldmVudCk7CiAgICB9LAogICAgaGFuZGxlSGVhZGVyQ2xpY2soY29sdW1uLCBldmVudCkgewogICAgICB0aGlzLiRlbWl0KCJoZWFkZXItY2xpY2siLCBjb2x1bW4sIGV2ZW50KTsKICAgIH0sCiAgICAvKiog5paw5aKe5oyJ6ZKuKi8KICAgIGhhbmRsZUFkZChmdW5jKSB7CiAgICAgIHRoaXMuZGF0ZVJhbmdlID0gW107CiAgICAgIHRoaXMucXVlcnlQYXJhbXMgPSB7fTsKICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gZnVuYy5sYWJlbDsKICAgICAgdGhpcy5zdWJtaXRGb3JtQXBpID0gZnVuYy5hcGk7CiAgICB9LAogICAgLyoqIOS/ruaUueaMiemSriovCiAgICBoYW5kbGVVcGRhdGUoZnVuYywgcm93KSB7CiAgICAgIHRoaXMuZGF0ZVJhbmdlID0gW107CiAgICAgIHRoaXMucXVlcnlQYXJhbXMgPSB7fTsKICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOwogICAgICB0aGlzLnN1Ym1pdEZvcm1BcGkgPSBmdW5jLmFwaTsKICAgICAgY29uc3QgaWQgPSByb3cuaWQgfHwgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLmlkKTsKICAgICAgaWYgKHRoaXMuc2VsZWN0QXBpKSB7CiAgICAgICAgdGhpcy5zZWxlY3RBcGkoaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgdGhpcy5mb3JtID0gZGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgfQogICAgICB0aGlzLnRpdGxlID0gZnVuYy5sYWJlbDsKICAgIH0sCiAgICAvKiog6K+m5oOF5oyJ6ZKuKi8KICAgIGhhbmRsZVNlbGVjdChmdW5jLCByb3cpIHsKICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBbXTsKICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IHt9OwogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7CiAgICAgIHRoaXMuc3VibWl0Rm9ybUFwaSA9IGZ1bmMuYXBpOwogICAgICBjb25zdCBpZCA9IHJvdy5pZCB8fCB0aGlzLm11bHRpcGxlU2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0uaWQpOwogICAgICBpZiAodGhpcy5zZWxlY3RBcGkpIHsKICAgICAgICB0aGlzLnNlbGVjdEFwaShpZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAib2JqZWN0IikgewogICAgICAgICAgICB0aGlzLmZvcm0gPSBkYXRhOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB9CiAgICAgIHRoaXMudGl0bGUgPSBmdW5jLmxhYmVsOwogICAgfSwKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZURlbGV0ZShmdW5jLCByb3cpIHsKICAgICAgY29uc3QgaWRzID0gcm93LmlkIHx8IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubWFwKGl0ZW0gPT4gaXRlbS5pZCk7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuehruiupCIgKyBmdW5jLmxhYmVsICsgJ+e8luWPt+S4uiInICsgaWRzICsgJyLnmoTmlbDmja7pobk/JywgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGZ1bmMuYXBpKGlkcyk7CiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICAgICAgdGhpcy4kZW1pdCgiZGVsZXRlIiwgaWRzKTsKICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5a+85Ye65oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVFeHBvcnQoZnVuYykgewogICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHRoaXMucXVlcnlQYXJhbXM7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuehruiupOWvvOWHuuaJgOacieespuWQiOadoeS7tueahOaVsOaNrumhuT8iLCAi6K2m5ZGKIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gZnVuYy5hcGkocXVlcnlQYXJhbXMpOwogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmRvd25sb2FkKHJlc3BvbnNlLmRhdGEuZmlsZV91cmwsIHJlc3BvbnNlLmRhdGEubmFtZSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDlr7zlhaXmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUltcG9ydCgpIHsKICAgICAgdGhpcy51cGxvYWQudGl0bGUgPSAi5a+85YWlIjsKICAgICAgdGhpcy51cGxvYWQub3BlbiA9IHRydWU7CiAgICB9LCAvKiog6I635Y+W6KGo5Y2V5qCh6aqMICovCiAgICBnZXRGb3JtUnVsZXMoKSB7CiAgICAgIGNvbnN0IGRpY3QgPSB7fTsKICAgICAgdGhpcy5maWVsZHMubWFwKHZhbHVlID0+IHsKICAgICAgICBpZiAodmFsdWUuZm9ybSkgewogICAgICAgICAgaWYgKHZhbHVlLnJlcXVpcmVkKSB7CiAgICAgICAgICAgIGRpY3RbdmFsdWUucHJvcF0gPSBbewogICAgICAgICAgICAgIHJlcXVpcmVkOiB2YWx1ZS5yZXF1aXJlZCwKICAgICAgICAgICAgICBtZXNzYWdlOiB2YWx1ZS5ydWxlc19tZXNzYWdlIHx8IHZhbHVlLmxhYmVsICsgIuS4jeiDveS4uuepuiIsCiAgICAgICAgICAgICAgdHJpZ2dlcjogdmFsdWUudHJpZ2dlciB8fCAiY2hhbmdlIgogICAgICAgICAgICB9XTsKICAgICAgICAgICAgaWYgKHZhbHVlLnZhbGlkYXRvcikgewogICAgICAgICAgICAgIGRpY3RbdmFsdWUucHJvcF1bMV0gPSB7CiAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IHZhbHVlLnZhbGlkYXRvciwKICAgICAgICAgICAgICAgIHRyaWdnZXI6IHZhbHVlLnRyaWdnZXIgfHwgImNoYW5nZSIKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGRpY3Q7CiAgICB9LAogICAgLyoqIOaPkOS6pOaMiemSriAqLwogICAgc3VibWl0Rm9ybSgpIHsKICAgICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdGhpcy5zdWJtaXRGb3JtQXBpKHRoaXMuZm9ybSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZSIsIHRoaXMuZm9ybSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zdWJtaXRGb3JtQXBpKHRoaXMuZm9ybSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoImFkZCIsIHRoaXMuZm9ybSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y+W5raI5oyJ6ZKuCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMuZm9ybSA9IHt9OwogICAgfSwKICAgIC8vIOiOt+WPluaTjeS9nOeahOadg+mZkOWIl+ihqAogICAgZ2V0T3BlcmF0aW9uUGVybWlzKCkgewogICAgICBsZXQgUGVybWlzID0gW107CiAgICAgIHRoaXMuZnVuY3MubWFwKHZhbHVlID0+IHsKICAgICAgICBpZiAoWyJ1cGRhdGUiLCAiZGVsZXRlIiwgInNlbGVjdCJdLmluZGV4T2YodmFsdWUudHlwZSkgIT09IC0xKSB7CiAgICAgICAgICBQZXJtaXMgPSBQZXJtaXMgKyB2YWx1ZS5wZXJtaXM7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIFBlcm1pczsKICAgIH0sCiAgICAvKiog5LiL6L295qih5p2/5pON5L2cICovCiAgICBpbXBvcnRUZW1wbGF0ZSgpIHsKICAgICAgdGhpcy5mdW5jcy5tYXAodmFsdWUgPT4gewogICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAiaW1wb3J0IikgewogICAgICAgICAgdGhpcy5pbXBvcnRBcGkgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmltcG9ydEFwaS50ZW1wbGF0ZV9hcGkoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmRvd25sb2FkKHJlc3BvbnNlLmRhdGEuZmlsZV91cmwsIHJlc3BvbnNlLmRhdGEubmFtZSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaWh+S7tuS4iuS8oOS4reWkhOeQhgogICAgaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzKGV2ZW50LCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLnVwbG9hZC5pc1VwbG9hZGluZyA9IHRydWU7CiAgICB9LAogICAgLy8g5paH5Lu25LiK5Lyg5oiQ5Yqf5aSE55CGCiAgICBoYW5kbGVGaWxlU3VjY2VzcyhyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy5mdW5jcy5tYXAodmFsdWUgPT4gewogICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAiaW1wb3J0IikgewogICAgICAgICAgdGhpcy5pbXBvcnRBcGkgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnVwbG9hZC5vcGVuID0gZmFsc2U7CiAgICAgIHRoaXMudXBsb2FkLmlzVXBsb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLmNsZWFyRmlsZXMoKTsKICAgICAgLy8g5piv5ZCm5pu05paw5bey57uP5a2Y5Zyo55qE55So5oi35pWw5o2uCiAgICAgIHRoaXMuaW1wb3J0QXBpLmFwaSh7CiAgICAgICAgZmlsZV91cmw6IHJlc3BvbnNlLmRhdGEuZmlsZV91cmwsCiAgICAgICAgdXBkYXRlU3VwcG9ydDogdGhpcy51cGxvYWQudXBkYXRlU3VwcG9ydAogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLiRhbGVydCgi5a+85YWl5oiQ5Yqf77yBIiwgIuWvvOWFpee7k+aenCIsIHsgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlIH0pOwogICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaPkOS6pOS4iuS8oOaWh+S7tgogICAgc3VibWl0RmlsZUZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnN1Ym1pdCgpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ModelDisplay","sourcesContent":["<!--\n@description: 强大的CRUD组件封装\n-->\n<template>\n  <div style=\"padding-left: 10px;padding-top: 10px;\">\n    <div class=\"grid-content bg-purple\">\n      <el-form ref=\"queryForm\" :model=\"queryParams\" :inline=\"true\" label-width=\"90px\">\n        <el-row>\n          <el-form-item\n            v-for=\"(value,index) in fields\"\n            v-if=\"value.search\"\n            :key=\"index\"\n            :label=\"value.label\"\n            :prop=\"value.prop\"\n          >\n            <!--           date/option/bool/users/depts -->\n            <el-switch\n              v-if=\"value.type==='boolean'\"\n              v-model=\"queryParams[value.prop]\"\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n            />\n            <model-select\n              v-else-if=\"value.type==='model_select' && value.select_data\"\n              :value.sync=\"queryParams[value.prop]\"\n              :prop=\"value.prop\"\n              :placeholder=\"value.select_data.placeholder|| '请选择'\"\n              :multiple=\"value.select_data.multiple|| false\"\n              :disable_branch_nodes=\"value.select_data.disable_branch_nodes|| false\"\n              :label_name=\"value.select_data.label_name|| 'name'\"\n              :select_options=\"modelSelect[value.prop] || []\"\n              style=\"width: 180px;line-height: 20px;\"\n            />\n            <dept-tree\n              v-else-if=\"value.type==='depts'\"\n              ref=\"dept_tree\"\n              :value.sync=\"queryParams[value.prop]\"\n              style=\"width: 150px;\"\n            />\n            <users-tree\n              v-else-if=\"value.type==='users'\"\n              ref=\"users_tree\"\n              :value.sync=\"queryParams[value.prop]\"\n              style=\"width: 150px;\"\n            />\n            <el-date-picker\n              v-else-if=\"value.type==='date'|| value.type==='datetime'\"\n              v-model=\"dateRange\"\n              size=\"small\"\n              style=\"width: 240px\"\n              value-format=\"yyyy-MM-dd HH:mm:ss\"\n              type=\"daterange\"\n              range-separator=\"-\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :default-time=\"['00:00:00', '23:59:59']\"\n            />\n            <el-select\n              v-else-if=\"value.type==='option' && value.option_key\"\n              v-model=\"queryParams[value.prop]\"\n              :placeholder=\"value.label\"\n              clearable\n              size=\"small\"\n            >\n              <el-option\n                v-for=\"dict in DictsOptions[value.option_key]\"\n                :key=\"dict.dictValue\"\n                :label=\"dict.dictLabel\"\n                :value=\"dict.dictValue\"\n              />\n            </el-select>\n            <el-input\n              v-else\n              v-model=\"queryParams[value.prop]\"\n              :placeholder=\"value.label\"\n              clearable\n              size=\"small\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-col :offset=\"8\">\n              <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleSearchFormSubmit\">搜索</el-button>\n              <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n            </el-col>\n          </el-form-item>\n        </el-row>\n      </el-form>\n    </div>\n    <el-row v-if=\"topLayout\" style=\"margin-bottom: 20px\">\n      <el-col v-if=\"topLayoutLeft\" :span=\"18\">\n        <el-row :gutter=\"10\" class=\"mb8\">\n          <el-col v-for=\"(func,index) in funcs\" :key=\"index\" :span=\"1.5\">\n            <el-button\n              v-if=\"func.type==='add'\"\n              v-hasPermi=\"func.permis\"\n              type=\"primary\"\n              plain\n              :icon=\"func.icon||'el-icon-plus'\"\n              size=\"mini\"\n              @click=\"handleAdd(func)\"\n            >{{ func.label }}\n            </el-button>\n            <el-button\n              v-else-if=\"func.type==='update'\"\n              v-hasPermi=\"func.permis\"\n              type=\"success\"\n              plain\n              :disabled=\"multipleSelection.length!==1\"\n              :icon=\"func.icon||'el-icon-edit'\"\n              size=\"mini\"\n              @click=\"handleUpdate(func,{})\"\n            >{{ func.label }}\n            </el-button>\n            <el-button\n              v-else-if=\"func.type==='delete'\"\n              v-hasPermi=\"func.permis\"\n              type=\"danger\"\n              plain\n              :disabled=\"multipleSelection.length===0\"\n              :icon=\"func.icon||'el-icon-delete'\"\n              size=\"mini\"\n              @click=\"handleDelete(func,{})\"\n            >{{ func.label }}\n            </el-button>\n            <el-button\n              v-else-if=\"func.type==='export'\"\n              v-hasPermi=\"func.permis\"\n              type=\"warning\"\n              plain\n              :icon=\"func.icon||'el-icon-download'\"\n              size=\"mini\"\n              @click=\"handleExport(func)\"\n            >{{ func.label }}\n            </el-button>\n            <el-button\n              v-else-if=\"func.type==='import'\"\n              v-hasPermi=\"func.permis\"\n              type=\"info\"\n              plain\n              :icon=\"func.icon||'el-icon-upload2'\"\n              size=\"mini\"\n              @click=\"handleImport(func.api)\"\n            >{{ func.label }}\n            </el-button>\n          </el-col>\n          <slot name=\"head_button\" />\n        </el-row>\n      </el-col>\n      <el-col v-if=\"topLayoutRight\" :span=\"6\">\n        <div class=\"grid-content bg-purple-light\" style=\"text-align: right\">\n          <slot name=\"tools\" />\n          <el-popover\n            placement=\"bottom\"\n            width=\"200\"\n            trigger=\"click\"\n          >\n            <div style=\"width: 50px;\">\n              <el-checkbox-group v-model=\"showFields\">\n                <el-checkbox\n                  v-for=\"(field, index) in fields\"\n                  :key=\"index\"\n                  :label=\"field\"\n                  :checked=\"field.show\"\n                  style=\"width: 100%\"\n                  @change=\"handleSelectField($event, field)\"\n                >{{ field.label }}\n                </el-checkbox>\n              </el-checkbox-group>\n            </div>\n            <el-button\n              slot=\"reference\"\n              :size=\"$ELEMENT.size\"\n              name=\"refresh\"\n              type=\"info\"\n              icon=\"el-icon-s-fold\"\n              title=\"设置显示的字段\"\n            />\n          </el-popover>\n        </div>\n      </el-col>\n    </el-row>\n\n    <el-table\n      ref=\"tableData\"\n      v-loading=\"tableLoading\"\n      :span-method=\"spanMethod\"\n      :data=\"tableData\"\n      :max-height=\"maxHeight\"\n      :row-key=\"getRowKeys\"\n      :stripe=\"stripe\"\n      :fit=\"fit\"\n      :border=\"border\"\n      :empty-text=\"emptyText\"\n      :highlight-current-row=\"highlightCurrentRow\"\n      :show-overflow-tooltip=\"showOverflowTooltip\"\n      @sort-change=\"handleSortChange\"\n      @cell-click=\"handleCellClick\"\n      @cell-dblclick=\"handleCellDbClick\"\n      @header-click=\"handleHeaderClick\"\n      @row-click=\"handleRowClick\"\n      @row-dblclick=\"handleRowDblClick\"\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column v-if=\"selection\" :reserve-selection=\"true\" type=\"selection\" width=\"50\" />\n      <slot name=\"prependColumn\" />\n      <!--<el-table-column v-if=\"false\" :index=\"getRowIndex\" label=\"序号\" type=\"index\" width=\"50\"/>-->\n      <template v-for=\"field in fields\">\n        <el-table-column\n          v-if=\"field.show\"\n          :key=\"field.prop\"\n          :prop=\"field.prop\"\n          :label=\"field.label\"\n          :sortable=\"field.sortable\"\n          :width=\"field.width || ''\"\n          show-overflow-tooltip\n        >\n          <template slot-scope=\"scope\">\n            <slot :name=\"field.prop\" :values=\"scope.row\" :prop=\"field.prop\" :field=\"field\">\n              <span v-html=\"formatColumnData(scope.row, field)\" />\n            </slot>\n          </template>\n        </el-table-column>\n      </template>\n      <el-table-column\n        v-if=\"hasPermi(getOperationPermis())\"\n        label=\"操作\"\n        align=\"center\"\n        width=\"220\"\n        class-name=\"small-padding fixed-width\"\n      >\n        <template slot-scope=\"scope\">\n          <span v-for=\"(func,index) in funcs\" :key=\"index\">\n            <el-button\n              v-if=\"func.type==='select'\"\n              v-hasPermi=\"func.permis\"\n              size=\"mini\"\n              type=\"text\"\n              :icon=\"func.icon||'el-icon-view'\"\n              @click=\"handleSelect(func,scope.row)\"\n            >{{ func.label }}</el-button>\n            &nbsp;\n            <el-button\n              v-if=\"func.type==='update'\"\n              v-hasPermi=\"func.permis\"\n              size=\"mini\"\n              type=\"text\"\n              :icon=\"func.icon||'el-icon-edit'\"\n              @click=\"handleUpdate(func,scope.row)\"\n            >{{ func.label }}</el-button>\n            &nbsp;\n            <el-button\n              v-else-if=\"func.type==='delete'\"\n              v-hasPermi=\"func.permis\"\n              size=\"mini\"\n              type=\"text\"\n              :icon=\"func.icon||'el-icon-delete'\"\n              @click=\"handleDelete(func,scope.row)\"\n            >{{ func.label }}</el-button>\n          </span>\n        </template>\n      </el-table-column>\n      <slot name=\"appendColumn\" />\n      <slot name=\"column\" />\n    </el-table>\n    <el-row>\n      <el-col v-if=\"selection\" :span=\"6\" style=\"margin-top: 20px\">\n        <span>已选择:<span style=\"color: #ff00ff;font-weight: bold;\">{{ multipleSelection.length }}</span>条</span>\n        <el-button\n          v-show=\"multipleSelection.length\"\n          type=\"info\"\n          size=\"mini\"\n          title=\"清空多选\"\n          @click=\"clearMultipleSelection\"\n        >清空\n        </el-button>\n      </el-col>\n      <el-pagination\n        :current-page=\"pagination.page\"\n        :page-size=\"pagination.page_size\"\n        :total=\"pagination.total\"\n        :page-sizes=\"paginationStyle.pageSizes || [10, 20, 50, 100]\"\n        :disabled=\"tableLoading\"\n        :small=\"paginationStyle.small || false\"\n        :layout=\"paginationStyle.layout || 'total, sizes, prev, pager, next, jumper'\"\n        background\n        class=\"right_pagination\"\n        @size-change=\"handleChangePageSize\"\n        @current-change=\"handleChangeCurrentPage\"\n      />\n    </el-row>\n\n    <!-- 添加或修改参数配置对话框 -->\n    <el-dialog\n      :title=\"title\"\n      :visible.sync=\"open\"\n      width=\"500px\"\n      append-to-body\n      :close-on-click-modal=\"close_on_click_modal\"\n      @close=\"close\"\n    >\n      <el-form ref=\"ruleForm\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\n        <el-form-item\n          v-for=\"(value,index) in fields\"\n          v-if=\"value.form\"\n          :key=\"index\"\n          :label=\"value.label\"\n          :prop=\"value.prop\"\n        >\n          <!--           date/option/bool/users/depts -->\n          <el-switch\n            v-if=\"value.type==='boolean'\"\n            v-model=\"form[value.prop]\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\"\n          />\n          <el-input-number\n            v-else-if=\"value.type==='number'\"\n            v-model=\"form[value.prop]\"\n            :precision=\"value.precision || 0\"\n            :step=\"value.step || 1\"\n            :max=\"value.step || Infinity\"\n          />\n          <dept-tree\n            v-else-if=\"value.type==='depts'\"\n            ref=\"dept_tree\"\n            :value.sync=\"form[value.prop]\"\n          />\n          <users-tree\n            v-else-if=\"value.type==='users'\"\n            ref=\"users_tree\"\n            :value.sync=\"form[value.prop]\"\n          />\n          <el-date-picker\n            v-else-if=\"value.type==='date' || value.type==='datetime'\"\n            v-model=\"form[value.prop]\"\n            type=\"date\"\n            size=\"small\"\n            style=\"width: 240px\"\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n            placeholder=\"选择日期\"\n          />\n          <el-select\n            v-else-if=\"value.type==='option' && value.option_key\"\n            v-model=\"form[value.prop]\"\n            :placeholder=\"value.label\"\n            clearable\n            size=\"small\"\n            style=\"width: 100%\"\n          >\n            <el-option\n              v-for=\"dict in DictsOptions[value.option_key]\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            />\n          </el-select>\n          <el-input\n            v-else-if=\"value.type==='text'\"\n            v-model=\"form[value.prop]\"\n            :placeholder=\"value.label\"\n            type=\"textarea\"\n            clearable\n            size=\"small\"\n          />\n          <model-select\n            v-else-if=\"value.type==='model_select' && value.select_data\"\n            :value.sync=\"form[value.prop]\"\n            :placeholder=\"value.select_data.placeholder|| '请选择'\"\n            :multiple=\"value.select_data.multiple|| false\"\n            :disable_branch_nodes=\"value.select_data.disable_branch_nodes|| false\"\n            :label_name=\"value.select_data.label_name|| 'name'\"\n            :select_options=\"modelSelect[value.prop] || []\"\n            style=\"line-height: 20px;\"\n          />\n          <el-cascader\n            v-else-if=\"value.type==='cascader' && value.select_data\"\n            v-model=\"form[value.prop]\"\n            :placeholder=\"value.select_data.placeholder|| '请选择'\"\n            :options=\"modelSelect[value.prop] || []\"\n            :clearable=\"value.select_data.clearable|| false\"\n            :filterable=\"value.select_data.filterable|| false\"\n            style=\"width: 100%\"\n          />\n          <el-input\n            v-else\n            v-model=\"form[value.prop]\"\n            :placeholder=\"value.label\"\n            clearable\n            size=\"small\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button v-if=\"this.title!=='详情'\" type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n    <!-- 导入对话框 -->\n    <el-dialog :title=\"upload.title\" :visible.sync=\"upload.open\" width=\"400px\" append-to-body>\n      <el-upload\n        ref=\"upload\"\n        :limit=\"1\"\n        accept=\".xlsx, .xls\"\n        :headers=\"upload.headers\"\n        :action=\"upload.url + '?updateSupport=' + upload.updateSupport\"\n        :disabled=\"upload.isUploading\"\n        :on-progress=\"handleFileUploadProgress\"\n        :on-success=\"handleFileSuccess\"\n        :auto-upload=\"false\"\n        drag\n      >\n        <i class=\"el-icon-upload\" />\n        <div class=\"el-upload__text\">\n          将文件拖到此处，或\n          <em>点击上传</em>\n        </div>\n        <div slot=\"tip\" class=\"el-upload__tip\">\n          <el-checkbox v-model=\"upload.updateSupport\" />\n          是否更新已经存在的数据\n          <el-link type=\"info\" style=\"font-size:12px\" @click=\"importTemplate\">下载模板</el-link>\n        </div>\n        <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:red\">提示：仅允许导入“xls”或“xlsx”格式文件！</div>\n      </el-upload>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitFileForm\">确 定</el-button>\n        <el-button @click=\"upload.open = false\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport moment from \"moment\";\nimport * as Utils from \"@/utils\";\nimport { getToken } from \"@/utils/auth\";\nimport ModelSelect from \"../ModelSelect/index\";\nimport { listUser } from \"@/api/admin/permission/user\";\nimport { treeselect } from \"@/api/admin/permission/dept\";\nexport default {\n  name: \"ModelDisplay\",\n  components: { ModelSelect },\n  props: {\n    value: {\n      // table的Data\n      type: Array,\n      default: () => []\n    },\n    spanMethod: {\n      type: Function,\n      default: null\n    },\n    // eslint-disable-next-line vue/require-prop-types\n    maxHeight: {\n      default: 700\n    },\n    stripe: {\n      type: Boolean,\n      default: true\n    },\n    // 是否可以通过点击 窗口外 关闭 Dialog\n    close_on_click_modal: {\n      type: Boolean,\n      default: true\n    },\n    fit: {\n      type: Boolean,\n      default: true\n    },\n    highlightCurrentRow: {\n      type: Boolean,\n      default: true\n    },\n    showOverflowTooltip: {\n      type: Boolean,\n      default: true\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    emptyText: {\n      type: String,\n      default: \"暂无数据\"\n    },\n    paginationParams: {\n      // 新增。分页参数, 当分页格式返回的属性名称不同使用, 可使用该属性覆盖默认分页属性名称\n      // 例如:{ page: 'page', pageSize: 'pageSize', count: 'total',results: 'list' }\n      type: Object,\n      default: () => {\n        return {\n          page: \"pageNum\",\n          pageSize: \"pageSize\",\n          count: \"count\",\n          results: \"results\"\n        };\n      }\n    },\n    listApi: {\n      // 用于替换method + url属性\n      type: Function,\n      default: null\n    },\n    topLayout: {\n      // 用于控制表格顶部的按钮、工具的显示。默认左右的按钮、功能都显示\n      type: Array,\n      default: () => {\n        return [\"left\", \"right\"];\n      }\n    },\n    fields: {\n      // 后端返回的字段\n      type: Array,\n      default: () => {\n        return [];\n      }\n    },\n    funcs: {\n      // 菜单配置字段\n      type: Array,\n      default: () => {\n        return [];\n      }\n    },\n    selection: {\n      // 开始开启多选(默认开启, true)\n      type: Boolean,\n      default: true\n    },\n    params: {\n      // 基本请求参数,最终请求参数=基本参数+基本高级搜索参数+组件封装的基本参数+租金组件封装的高级搜索参数\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    // 默认分页样式\n    paginationStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    // 默认页面大小\n    pageSizes: {\n      type: Array,\n      default: () => {\n        return [10, 20, 50, 100, 500];\n      }\n    }\n  },\n  data() {\n    return {\n      showFields: [], // 显示的字段\n      searchForm: {\n        search: \"\",\n        ordering: \"\"\n      },\n      queryParams: {},\n      tableLoading: false,\n      tableData: [],\n      rowKey: \"\",\n      dateRange: [],\n      multipleSelection: [],\n      pagination: {\n        page: 1,\n        page_size: 10,\n        total: 0\n      },\n      // 表单参数\n      form: {},\n      rules: this.getFormRules(),\n      open: false,\n      // 提交时api\n      submitFormApi: \"\",\n      // 单个查询api\n      selectApi: \"\",\n      // 导入api\n      importApi: \"\",\n      DictsOptions: {},\n      modelSelect: {},\n      getRowKeys: row => {\n        if (this.rowKey) {\n          return row[this.rowKey];\n        }\n        return row.id || row.uuid;\n      },\n      title: \"\",\n      // 用户导入参数\n      upload: {\n        // 是否显示弹出层（用户导入）\n        open: false,\n        // 弹出层标题（用户导入）\n        title: \"\",\n        // 是否禁用上传\n        isUploading: false,\n        // 是否更新已经存在的用户数据\n        updateSupport: 0,\n        // 设置上传的请求头部\n        headers: { Authorization: \"Bearer \" + getToken() },\n        // 上传的地址\n        url: process.env.VUE_APP_BASE_API + \"/admin/system/savefile/\"\n      }\n    };\n  },\n  computed: {\n    topLayoutLeft() {\n      return this.topLayout.indexOf(\"left\") >= 0;\n    },\n    topLayoutRight() {\n      return this.topLayout.indexOf(\"right\") >= 0;\n    }\n  },\n  watch: {\n    params: {\n      deep: true,\n      handler: function(newValue, oldValue) {\n        this.getTableData();\n      }\n    }\n  },\n  mounted() {\n  },\n  created() {\n    this.initComponentData();\n    this.initOptions();\n    this.getOperationPermis();\n    // this.getTableData();\n    this.funcs.map(value => {\n      if (value.type === \"select\") {\n        this.selectApi = value.api;\n      }\n    });\n  },\n  methods: {\n    initComponentData() {\n      this.pagination.page_size = this.pageSizes[0];\n      this.fields.forEach(field => {\n        field.show = (!!field.show);\n        field.type = (field.type || \"string\").toLocaleLowerCase();\n        if (field.type.startsWith(\"bool\")) {\n          field.type = \"boolean\";\n        }\n        field.label = field.label || field.prop;\n        field.search = (!!field.search);\n        field.sortable = (!!field.sortable);\n        if (field.ordering && field.ordering.startsWith(\"desc\")) {\n          this.searchForm.ordering = `-${field.prop}`;\n        } else if (field.ordering && field.ordering.startsWith(\"asc\")) {\n          this.searchForm.ordering = `${field.prop}`;\n        }\n        field.width = field.width || \"\";\n        if (field.type === \"choices\") {\n          if (Utils.isArray(field.choices) && field.choices.length > 0) {\n            if (!Utils.isObj(field.choices[0])) {\n              field.choices = field.choices.map(value => {\n                return {\n                  label: value,\n                  value: value\n                };\n              });\n            }\n          }\n        }\n        field.unique = (!!field.unique);\n        if (field.unique) {\n          this.rowKey = field.prop;\n        }\n      });\n    },\n    formatColumnData(row, field) {\n      const type = field.type || \"string\";\n      const prop = field.prop;\n      if (field.formatter && typeof field.formatter === \"function\") {\n        return field.formatter(row, prop, type);\n      }\n      if (type === \"string\") {\n        return row[prop];\n      } else if (type === \"datetime\") {\n        return this.formatDatetime(row[prop]);\n      } else if (type === \"date\") {\n        return this.formatDate(row[prop]);\n      } else if (type === \"time\") {\n        return this.formatTime(row[prop]);\n      } else if (type === \"option\") {\n        return this.formatOptions(field.option_key, row[prop]);\n      } else if (type === \"users\") {\n        return this.formatSelect(row[prop], prop);\n      } else if (type === \"depts\") {\n        return this.formatSelect(row[prop], prop);\n      } else if (type === \"model_select\") {\n        return this.formatSelect(row[prop], prop);\n      } else if (type.startsWith(\"bool\")) {\n        return row[prop] ? \"是\" : \"否\";\n      } else if (type === \"choices\") {\n        const choices = field.choices;\n        return this.formatChoices(choices, row[prop]);\n      } else {\n        return row[prop];\n      }\n    },\n    formatChoices(choices, value) {\n      for (const choice of choices) {\n        if (choice.value === value) {\n          return choice.label;\n        }\n      }\n      return value;\n    },\n    formatDatetime(datetime) {\n      return moment(datetime).format(\"YYYY-MM-DD HH:mm:ss\");\n    },\n    formatDate(date) {\n      return moment(date).format(\"YYYY-MM-DD\");\n    },\n    formatTime(time) {\n      return moment(time).format(\"HH:mm:ss\");\n    },\n    formatOptions(option_key, id) {\n      var data = this.DictsOptions[option_key];\n      if (id === null || !data) return \"\";\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].dictValue === id) {\n          return data[i].dictLabel;\n        }\n      }\n      return \"\";\n    },\n    formatSelect(id, prop) {\n      var data = this.modelSelect[prop];\n      if (!id || !data) return \"\";\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].id === id) {\n          return data[i].label;\n        }\n      }\n      return \"\";\n    },\n    getTableData() {\n      this.listInterfaceData(this.getRequestParams());\n      return this.tableData;\n    },\n    getFormattedPaginationParams() {\n      const pageParamName = this.paginationParams.page;\n      const pageSizeParamName = this.paginationParams.pageSize;\n      const params = {};\n      params[pageParamName] = this.pagination.page;\n      params[pageSizeParamName] = this.pagination.page_size;\n      return params;\n    },\n    // 根据搜索框的内容, 组装请求参数\n    getRequestParams() {\n      // 组装分页参数、高级搜索参数\n      const tmpParams = { ...this.params, ...this.getFormattedPaginationParams(), ...this.queryParams };\n      const params = {};\n      for (const prop of Object.keys(tmpParams)) {\n        if (tmpParams[prop]) {\n          params[prop] = tmpParams[prop];\n        }\n      }\n      // 组装普遍模糊搜索的参数\n      if (this.searchForm.search) {\n        params[\"search\"] = this.searchForm.search;\n      }\n      // 组装普遍排序搜索的参数\n      if (this.searchForm.ordering) {\n        params[\"ordering\"] = this.searchForm.ordering;\n      }\n      // console.dir(params);\n      return this.addDateRange(params, this.dateRange);\n    },\n    // 封装后端接口, 后端接口返回数据必须规范一致\n    listInterfaceData(params) {\n      this.tableLoading = true;\n      this.listApi(params).then(response => {\n        this.tableLoading = false;\n        if (response.status === \"success\") {\n          const resultsParamName = this.paginationParams.results;\n          const countParamName = this.paginationParams.count;\n          this.tableData = response.data[resultsParamName] || [];\n          this.pagination.total = response.data[countParamName] || 0;\n        } else {\n          this.$message.warning(response.msg || \"获取接口信息失败!\");\n        }\n      }).catch(error => {\n        this.tableLoading = false;\n        console.error(error);\n      });\n    },\n    /** 清空已选择 */\n    clearMultipleSelection() {\n      this.clearSelection();\n    },\n    /** 清空已选择 */\n    clearSelection() {\n      this.$refs.tableData.clearSelection();\n    },\n    handleSelectField(e, field) {\n      field.show = e;\n    },\n    // 处理提交表单, 点击搜索按钮事件\n    handleSearchFormSubmit() {\n      this.pagination.page = 1;\n      this.getTableData();\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.pagination.page = 1;\n      this.getTableData();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.dateRange = [];\n      this.queryParams = {};\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    /** 初始化 Options */\n    initOptions() {\n      const Promises = [];\n      this.fields.map(value => {\n        if (value.option_key) {\n          Promises.push(this.getDicts(value.option_key).then(response => {\n            this.DictsOptions[value.option_key] = response.data;\n          }));\n        }\n        if (value.type === \"model_select\" && value.select_data) {\n          Promises.push(this.getModelSelect(value.prop, value.select_data.label_name, value.select_data.listApi).then(response => {\n            this.modelSelect[value.prop] = response;\n          }));\n        }\n        if (value.type === \"cascader\" && value.select_data) {\n          Promises.push(value.select_data.listApi().then(response => {\n            this.modelSelect[value.prop] = response.data;\n          }));\n        }\n        if (value.type === \"users\") {\n          Promises.push(this.getModelSelect(value.prop, \"name\", listUser, { _fields: \"id,name\" }).then(response => {\n            this.modelSelect[value.prop] = response;\n          }));\n        }\n        if (value.type === \"depts\") {\n          Promises.push(this.getModelSelect(value.prop, \"label\", treeselect).then(response => {\n            this.modelSelect[value.prop] = response;\n          }));\n        }\n      });\n      Promise.all(Promises).then(() => {\n        this.getTableData();\n      });\n    },\n    // 处理修改多选的值\n    handleSelectionChange(val) {\n      this.$emit(\"selection-change\", val);\n      this.multipleSelection = val;\n    },\n    // 处理修改表格分页器的页面大小(再次获取接口数据)\n    handleChangePageSize(val) {\n      this.pagination.page_size = val;\n      this.getTableData();\n    },\n    // 处理修改表格分页器的页码(再次获取接口数据)\n    handleChangeCurrentPage(val) {\n      this.pagination.page = val;\n      this.getTableData();\n    },\n    handleSortChange(info) {\n      const { prop, order } = info;\n      if (!order) {\n        this.searchForm.ordering = \"\";\n      } else if (order.startsWith(\"desc\")) {\n        this.searchForm.ordering = `-${prop}`;\n      } else {\n        this.searchForm.ordering = `${prop}`;\n      }\n      this.getTableData();\n    },\n    handleCellClick(row, column, cell, event) {\n      this.$emit(\"cell-click\", row, column, cell, event);\n    },\n    handleCellDbClick(row, column, cell, event) {\n      this.$emit(\"cell-dblclick\", row, column, cell, event);\n    },\n    handleRowClick(row, column, event) {\n      this.$emit(\"row-click\", row, column, event);\n    },\n    handleRowDblClick(row, column, event) {\n      this.$emit(\"row-dblclick\", row, column, event);\n    },\n    handleHeaderClick(column, event) {\n      this.$emit(\"header-click\", column, event);\n    },\n    /** 新增按钮*/\n    handleAdd(func) {\n      this.dateRange = [];\n      this.queryParams = {};\n      this.resetForm(\"queryForm\");\n      this.open = true;\n      this.title = func.label;\n      this.submitFormApi = func.api;\n    },\n    /** 修改按钮*/\n    handleUpdate(func, row) {\n      this.dateRange = [];\n      this.queryParams = {};\n      this.resetForm(\"queryForm\");\n      this.submitFormApi = func.api;\n      const id = row.id || this.multipleSelection.map(item => item.id);\n      if (this.selectApi) {\n        this.selectApi(id).then(response => {\n          const data = response.data;\n          if (data && typeof data === \"object\") {\n            this.form = data;\n          }\n          this.open = true;\n        });\n      } else {\n        this.open = true;\n      }\n      this.title = func.label;\n    },\n    /** 详情按钮*/\n    handleSelect(func, row) {\n      this.dateRange = [];\n      this.queryParams = {};\n      this.resetForm(\"queryForm\");\n      this.submitFormApi = func.api;\n      const id = row.id || this.multipleSelection.map(item => item.id);\n      if (this.selectApi) {\n        this.selectApi(id).then(response => {\n          const data = response.data;\n          if (data && typeof data === \"object\") {\n            this.form = data;\n          }\n          this.open = true;\n        });\n      } else {\n        this.open = true;\n      }\n      this.title = func.label;\n    },\n    /** 删除按钮操作 */\n    handleDelete(func, row) {\n      const ids = row.id || this.multipleSelection.map(item => item.id);\n      this.$confirm(\"是否确认\" + func.label + '编号为\"' + ids + '\"的数据项?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function() {\n        return func.api(ids);\n      }).then(() => {\n        this.getTableData();\n        this.$emit(\"delete\", ids);\n        this.msgSuccess(\"删除成功\");\n      });\n    },\n    /** 导出按钮操作 */\n    handleExport(func) {\n      const queryParams = this.queryParams;\n      this.$confirm(\"是否确认导出所有符合条件的数据项?\", \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function() {\n        return func.api(queryParams);\n      }).then(response => {\n        this.download(response.data.file_url, response.data.name);\n      });\n    },\n    /** 导入按钮操作 */\n    handleImport() {\n      this.upload.title = \"导入\";\n      this.upload.open = true;\n    }, /** 获取表单校验 */\n    getFormRules() {\n      const dict = {};\n      this.fields.map(value => {\n        if (value.form) {\n          if (value.required) {\n            dict[value.prop] = [{\n              required: value.required,\n              message: value.rules_message || value.label + \"不能为空\",\n              trigger: value.trigger || \"change\"\n            }];\n            if (value.validator) {\n              dict[value.prop][1] = {\n                validator: value.validator,\n                trigger: value.trigger || \"change\"\n              };\n            }\n          }\n        }\n      });\n      return dict;\n    },\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"ruleForm\"].validate(valid => {\n        if (valid) {\n          if (this.form.id !== undefined) {\n            this.submitFormApi(this.form).then(() => {\n              this.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getTableData();\n              this.$emit(\"update\", this.form);\n            });\n          } else {\n            this.submitFormApi(this.form).then(() => {\n              this.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getTableData();\n              this.$emit(\"add\", this.form);\n            });\n          }\n        }\n      });\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n    },\n    close() {\n      this.$refs[\"ruleForm\"].resetFields();\n      this.form = {};\n    },\n    // 获取操作的权限列表\n    getOperationPermis() {\n      let Permis = [];\n      this.funcs.map(value => {\n        if ([\"update\", \"delete\", \"select\"].indexOf(value.type) !== -1) {\n          Permis = Permis + value.permis;\n        }\n      });\n      return Permis;\n    },\n    /** 下载模板操作 */\n    importTemplate() {\n      this.funcs.map(value => {\n        if (value.type === \"import\") {\n          this.importApi = value;\n        }\n      });\n      this.importApi.template_api().then(response => {\n        this.download(response.data.file_url, response.data.name);\n      });\n    },\n    // 文件上传中处理\n    handleFileUploadProgress(event, file, fileList) {\n      this.upload.isUploading = true;\n    },\n    // 文件上传成功处理\n    handleFileSuccess(response, file, fileList) {\n      this.funcs.map(value => {\n        if (value.type === \"import\") {\n          this.importApi = value;\n        }\n      });\n      this.upload.open = false;\n      this.upload.isUploading = false;\n      this.$refs.upload.clearFiles();\n      // 是否更新已经存在的用户数据\n      this.importApi.api({\n        file_url: response.data.file_url,\n        updateSupport: this.upload.updateSupport\n      }).then(response => {\n        this.$alert(\"导入成功！\", \"导入结果\", { dangerouslyUseHTMLString: true });\n        this.getTableData();\n      });\n    },\n    // 提交上传文件\n    submitFileForm() {\n      this.$refs.upload.submit();\n    }\n  }\n};\n</script>\n\n<style scoped>\n  .picker {\n    width: 240px;\n  }\n\n  .el-pagination {\n    padding: 5px;\n  }\n\n  .right_pagination {\n    text-align: right;\n    padding-top: 20px;\n  }\n</style>\n"]}]}