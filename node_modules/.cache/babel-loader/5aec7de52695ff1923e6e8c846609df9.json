{"remainingRequest":"/Users/mac/Desktop/DDM-admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/DDM-admin/src/store/modules/user.js","dependencies":[{"path":"/Users/mac/Desktop/DDM-admin/src/store/modules/user.js","mtime":1702065174000},{"path":"/Users/mac/Desktop/DDM-admin/babel.config.js","mtime":1702065174000},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1703645363792},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1703645364828}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGdldEluZm8sIGxvZ2luLCBsb2dvdXQgfSBmcm9tICJAL2FwaS9hZG1pbi9sb2dpbiI7CmltcG9ydCB7IGdldFRva2VuLCByZW1vdmVUb2tlbiwgc2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOwp2YXIgdXNlciA9IHsKICBzdGF0ZTogewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAiIiwKICAgIGF2YXRhcjogIiIsCiAgICByb2xlczogW10sCiAgICBwZXJtaXNzaW9uczogW10sCiAgICB1bnJlYWRfbXNnX2NvdW50OiAwCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICAgIH0sCiAgICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogICAgfSwKICAgIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgICBzdGF0ZS5yb2xlcyA9IHJvbGVzOwogICAgfSwKICAgIFNFVF9QRVJNSVNTSU9OUzogZnVuY3Rpb24gU0VUX1BFUk1JU1NJT05TKHN0YXRlLCBwZXJtaXNzaW9ucykgewogICAgICBzdGF0ZS5wZXJtaXNzaW9ucyA9IHBlcm1pc3Npb25zOwogICAgfSwKICAgIFNFVF9VTlJFQURfTVNHX0NPVU5UOiBmdW5jdGlvbiBTRVRfVU5SRUFEX01TR19DT1VOVChzdGF0ZSwgdW5yZWFkX21zZ19jb3VudCkgewogICAgICBzdGF0ZS51bnJlYWRfbXNnX2NvdW50ID0gdW5yZWFkX21zZ19jb3VudDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIOeZu+W9lQogICAgTG9naW46IGZ1bmN0aW9uIExvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUudHJpbSgpOwogICAgICB2YXIgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgICAgdmFyIGNvZGUgPSB1c2VySW5mby5jb2RlOwogICAgICB2YXIgdXVpZCA9IHVzZXJJbmZvLnV1aWQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCBjb2RlLCB1dWlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHNldFRva2VuKHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCByZXMuZGF0YS5kYXRhLnRva2VuKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgR2V0SW5mbzogZnVuY3Rpb24gR2V0SW5mbyhfcmVmMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgdXNlciA9IHJlcy5kYXRhLnVzZXI7CiAgICAgICAgICB2YXIgYXZhdGFyID0gdXNlci5hdmF0YXIgPyBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJICsgdXNlci5hdmF0YXIgOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvcHJvZmlsZS5qcGciKTsKICAgICAgICAgIGlmIChyZXMuZGF0YS5yb2xlcyAmJiByZXMuZGF0YS5yb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIC8vIOmqjOivgei/lOWbnueahHJvbGVz5piv5ZCm5piv5LiA5Liq6Z2e56m65pWw57uECiAgICAgICAgICAgIGNvbW1pdCgiU0VUX1JPTEVTIiwgcmVzLmRhdGEucm9sZXMpOwogICAgICAgICAgICBjb21taXQoIlNFVF9QRVJNSVNTSU9OUyIsIHJlcy5kYXRhLnBlcm1pc3Npb25zKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbW1pdCgiU0VUX1JPTEVTIiwgWyJST0xFX0RFRkFVTFQiXSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb21taXQoIlNFVF9OQU1FIiwgdXNlci5uYW1lKTsKICAgICAgICAgIGNvbW1pdCgiU0VUX1VOUkVBRF9NU0dfQ09VTlQiLCB1c2VyLnVucmVhZF9tc2dfY291bnQpOwogICAgICAgICAgY29tbWl0KCJTRVRfQVZBVEFSIiwgYXZhdGFyKTsKICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YCA5Ye657O757ufCiAgICBMb2dPdXQ6IGZ1bmN0aW9uIExvZ091dChfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgIiIpOwogICAgICAgICAgY29tbWl0KCJTRVRfUk9MRVMiLCBbXSk7CiAgICAgICAgICBjb21taXQoIlNFVF9QRVJNSVNTSU9OUyIsIFtdKTsKICAgICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliY3nq68g55m75Ye6CiAgICBGZWRMb2dPdXQ6IGZ1bmN0aW9uIEZlZExvZ091dChfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsICIiKTsKICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB1c2VyOw=="},{"version":3,"names":["getInfo","login","logout","getToken","removeToken","setToken","user","state","token","name","avatar","roles","permissions","unread_msg_count","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","SET_UNREAD_MSG_COUNT","actions","Login","_ref","userInfo","commit","username","trim","password","code","uuid","Promise","resolve","reject","then","res","data","catch","error","GetInfo","_ref2","process","env","VUE_APP_BASE_API","require","length","LogOut","_ref3","FedLogOut","_ref4"],"sources":["/Users/mac/Desktop/DDM-admin/src/store/modules/user.js"],"sourcesContent":["import { getInfo, login, logout } from \"@/api/admin/login\";\nimport { getToken, removeToken, setToken } from \"@/utils/auth\";\n\nconst user = {\n  state: {\n    token: getToken(),\n    name: \"\",\n    avatar: \"\",\n    roles: [],\n    permissions: [],\n    unread_msg_count: 0\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token;\n    },\n    SET_NAME: (state, name) => {\n      state.name = name;\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar;\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles;\n    },\n    SET_PERMISSIONS: (state, permissions) => {\n      state.permissions = permissions;\n    },\n    SET_UNREAD_MSG_COUNT: (state, unread_msg_count) => {\n      state.unread_msg_count = unread_msg_count;\n    }\n  },\n\n  actions: {\n    // 登录\n    Login({ commit }, userInfo) {\n      const username = userInfo.username.trim();\n      const password = userInfo.password;\n      const code = userInfo.code;\n      const uuid = userInfo.uuid;\n      return new Promise((resolve, reject) => {\n        login(username, password, code, uuid).then(res => {\n          setToken(res.data.data.token);\n          commit(\"SET_TOKEN\", res.data.data.token);\n          resolve();\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    },\n\n    // 获取用户信息\n    GetInfo({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        getInfo(state.token).then(res => {\n          const user = res.data.user;\n          const avatar = user.avatar ? process.env.VUE_APP_BASE_API + user.avatar : require(\"@/assets/images/profile.jpg\");\n          if (res.data.roles && res.data.roles.length > 0) { // 验证返回的roles是否是一个非空数组\n            commit(\"SET_ROLES\", res.data.roles);\n            commit(\"SET_PERMISSIONS\", res.data.permissions);\n          } else {\n            commit(\"SET_ROLES\", [\"ROLE_DEFAULT\"]);\n          }\n          commit(\"SET_NAME\", user.name);\n          commit(\"SET_UNREAD_MSG_COUNT\", user.unread_msg_count);\n          commit(\"SET_AVATAR\", avatar);\n          resolve(res.data);\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    },\n\n    // 退出系统\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token).then(() => {\n          commit(\"SET_TOKEN\", \"\");\n          commit(\"SET_ROLES\", []);\n          commit(\"SET_PERMISSIONS\", []);\n          removeToken();\n          resolve();\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise(resolve => {\n        commit(\"SET_TOKEN\", \"\");\n        removeToken();\n        resolve();\n      });\n    }\n  }\n};\n\nexport default user;\n"],"mappings":";;;AAAA,SAASA,OAAO,EAAEC,KAAK,EAAEC,MAAM,QAAQ,mBAAmB;AAC1D,SAASC,QAAQ,EAAEC,WAAW,EAAEC,QAAQ,QAAQ,cAAc;AAE9D,IAAMC,IAAI,GAAG;EACXC,KAAK,EAAE;IACLC,KAAK,EAAEL,QAAQ,CAAC,CAAC;IACjBM,IAAI,EAAE,EAAE;IACRC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAE,EAAE;IACTC,WAAW,EAAE,EAAE;IACfC,gBAAgB,EAAE;EACpB,CAAC;EAEDC,SAAS,EAAE;IACTC,SAAS,EAAE,SAAAA,UAACR,KAAK,EAAEC,KAAK,EAAK;MAC3BD,KAAK,CAACC,KAAK,GAAGA,KAAK;IACrB,CAAC;IACDQ,QAAQ,EAAE,SAAAA,SAACT,KAAK,EAAEE,IAAI,EAAK;MACzBF,KAAK,CAACE,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDQ,UAAU,EAAE,SAAAA,WAACV,KAAK,EAAEG,MAAM,EAAK;MAC7BH,KAAK,CAACG,MAAM,GAAGA,MAAM;IACvB,CAAC;IACDQ,SAAS,EAAE,SAAAA,UAACX,KAAK,EAAEI,KAAK,EAAK;MAC3BJ,KAAK,CAACI,KAAK,GAAGA,KAAK;IACrB,CAAC;IACDQ,eAAe,EAAE,SAAAA,gBAACZ,KAAK,EAAEK,WAAW,EAAK;MACvCL,KAAK,CAACK,WAAW,GAAGA,WAAW;IACjC,CAAC;IACDQ,oBAAoB,EAAE,SAAAA,qBAACb,KAAK,EAAEM,gBAAgB,EAAK;MACjDN,KAAK,CAACM,gBAAgB,GAAGA,gBAAgB;IAC3C;EACF,CAAC;EAEDQ,OAAO,EAAE;IACP;IACAC,KAAK,WAAAA,MAAAC,IAAA,EAAaC,QAAQ,EAAE;MAAA,IAApBC,MAAM,GAAAF,IAAA,CAANE,MAAM;MACZ,IAAMC,QAAQ,GAAGF,QAAQ,CAACE,QAAQ,CAACC,IAAI,CAAC,CAAC;MACzC,IAAMC,QAAQ,GAAGJ,QAAQ,CAACI,QAAQ;MAClC,IAAMC,IAAI,GAAGL,QAAQ,CAACK,IAAI;MAC1B,IAAMC,IAAI,GAAGN,QAAQ,CAACM,IAAI;MAC1B,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;QACtChC,KAAK,CAACyB,QAAQ,EAAEE,QAAQ,EAAEC,IAAI,EAAEC,IAAI,CAAC,CAACI,IAAI,CAAC,UAAAC,GAAG,EAAI;UAChD9B,QAAQ,CAAC8B,GAAG,CAACC,IAAI,CAACA,IAAI,CAAC5B,KAAK,CAAC;UAC7BiB,MAAM,CAAC,WAAW,EAAEU,GAAG,CAACC,IAAI,CAACA,IAAI,CAAC5B,KAAK,CAAC;UACxCwB,OAAO,CAAC,CAAC;QACX,CAAC,CAAC,CAACK,KAAK,CAAC,UAAAC,KAAK,EAAI;UAChBL,MAAM,CAACK,KAAK,CAAC;QACf,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAED;IACAC,OAAO,WAAAA,QAAAC,KAAA,EAAoB;MAAA,IAAjBf,MAAM,GAAAe,KAAA,CAANf,MAAM;QAAElB,KAAK,GAAAiC,KAAA,CAALjC,KAAK;MACrB,OAAO,IAAIwB,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;QACtCjC,OAAO,CAACO,KAAK,CAACC,KAAK,CAAC,CAAC0B,IAAI,CAAC,UAAAC,GAAG,EAAI;UAC/B,IAAM7B,IAAI,GAAG6B,GAAG,CAACC,IAAI,CAAC9B,IAAI;UAC1B,IAAMI,MAAM,GAAGJ,IAAI,CAACI,MAAM,GAAG+B,OAAO,CAACC,GAAG,CAACC,gBAAgB,GAAGrC,IAAI,CAACI,MAAM,GAAGkC,OAAO,CAAC,6BAA6B,CAAC;UAChH,IAAIT,GAAG,CAACC,IAAI,CAACzB,KAAK,IAAIwB,GAAG,CAACC,IAAI,CAACzB,KAAK,CAACkC,MAAM,GAAG,CAAC,EAAE;YAAE;YACjDpB,MAAM,CAAC,WAAW,EAAEU,GAAG,CAACC,IAAI,CAACzB,KAAK,CAAC;YACnCc,MAAM,CAAC,iBAAiB,EAAEU,GAAG,CAACC,IAAI,CAACxB,WAAW,CAAC;UACjD,CAAC,MAAM;YACLa,MAAM,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,CAAC;UACvC;UACAA,MAAM,CAAC,UAAU,EAAEnB,IAAI,CAACG,IAAI,CAAC;UAC7BgB,MAAM,CAAC,sBAAsB,EAAEnB,IAAI,CAACO,gBAAgB,CAAC;UACrDY,MAAM,CAAC,YAAY,EAAEf,MAAM,CAAC;UAC5BsB,OAAO,CAACG,GAAG,CAACC,IAAI,CAAC;QACnB,CAAC,CAAC,CAACC,KAAK,CAAC,UAAAC,KAAK,EAAI;UAChBL,MAAM,CAACK,KAAK,CAAC;QACf,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAED;IACAQ,MAAM,WAAAA,OAAAC,KAAA,EAAoB;MAAA,IAAjBtB,MAAM,GAAAsB,KAAA,CAANtB,MAAM;QAAElB,KAAK,GAAAwC,KAAA,CAALxC,KAAK;MACpB,OAAO,IAAIwB,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;QACtC/B,MAAM,CAACK,KAAK,CAACC,KAAK,CAAC,CAAC0B,IAAI,CAAC,YAAM;UAC7BT,MAAM,CAAC,WAAW,EAAE,EAAE,CAAC;UACvBA,MAAM,CAAC,WAAW,EAAE,EAAE,CAAC;UACvBA,MAAM,CAAC,iBAAiB,EAAE,EAAE,CAAC;UAC7BrB,WAAW,CAAC,CAAC;UACb4B,OAAO,CAAC,CAAC;QACX,CAAC,CAAC,CAACK,KAAK,CAAC,UAAAC,KAAK,EAAI;UAChBL,MAAM,CAACK,KAAK,CAAC;QACf,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAED;IACAU,SAAS,WAAAA,UAAAC,KAAA,EAAa;MAAA,IAAVxB,MAAM,GAAAwB,KAAA,CAANxB,MAAM;MAChB,OAAO,IAAIM,OAAO,CAAC,UAAAC,OAAO,EAAI;QAC5BP,MAAM,CAAC,WAAW,EAAE,EAAE,CAAC;QACvBrB,WAAW,CAAC,CAAC;QACb4B,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAED,eAAe1B,IAAI"}]}