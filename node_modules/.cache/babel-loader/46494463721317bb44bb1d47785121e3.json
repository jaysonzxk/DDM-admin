{"remainingRequest":"/Users/mac/Desktop/DDM-admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/DDM-admin/src/views/admin/permission/dept/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mac/Desktop/DDM-admin/src/views/admin/permission/dept/index.vue","mtime":1702065174000},{"path":"/Users/mac/Desktop/DDM-admin/babel.config.js","mtime":1702065174000},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1703645363792},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1703645364828},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1703645363792},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1703645365038}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBsaXN0RGVwdCwgZ2V0RGVwdCwgZGVsRGVwdCwgYWRkRGVwdCwgdXBkYXRlRGVwdCwgbGlzdERlcHRFeGNsdWRlQ2hpbGQgfSBmcm9tICJAL2FwaS9hZG1pbi9wZXJtaXNzaW9uL2RlcHQiOwppbXBvcnQgVHJlZXNlbGVjdCBmcm9tICJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCI7CmltcG9ydCAiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRlcHQiLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVzZWxlY3Q6IFRyZWVzZWxlY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDpga7nvanlsYIKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2CiAgICAgIHNob3dTZWFyY2g6IHRydWUsCiAgICAgIC8vIOihqOagvOagkeaVsOaNrgogICAgICBkZXB0TGlzdDogW10sCiAgICAgIC8vIOmDqOmXqOagkemAiemhuQogICAgICBkZXB0T3B0aW9uczogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g54q25oCB5pWw5o2u5a2X5YW4CiAgICAgIHN0YXR1c09wdGlvbnM6IFtdLAogICAgICAvLyDmn6Xor6Llj4LmlbAKICAgICAgcXVlcnlQYXJhbXM6IHsKICAgICAgICBkZXB0TmFtZTogdW5kZWZpbmVkLAogICAgICAgIHN0YXR1czogdW5kZWZpbmVkLAogICAgICAgIHBhZ2VOdW06ICJhbGwiCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgLy8g6KGo5Y2V5qCh6aqMCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcGFyZW50SWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLkuIrnuqfpg6jpl6jkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgZGVwdE5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLpg6jpl6jlkI3np7DkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgb3JkZXJOdW06IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLmmL7npLrmjpLluo/kuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgZW1haWw6IFt7CiAgICAgICAgICB0eXBlOiAiZW1haWwiLAogICAgICAgICAgbWVzc2FnZTogIifor7fovpPlhaXmraPnoa7nmoTpgq7nrrHlnLDlnYAiLAogICAgICAgICAgdHJpZ2dlcjogWyJibHVyIiwgImNoYW5nZSJdCiAgICAgICAgfV0sCiAgICAgICAgcGhvbmU6IFt7CiAgICAgICAgICBwYXR0ZXJuOiAvXjFbM3w0fDV8Nnw3fDh8OV1bMC05XVxkezh9JC8sCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+356CBIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgdGhpcy5nZXREaWN0cygic3lzX25vcm1hbF9kaXNhYmxlIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMuc3RhdHVzT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6Lpg6jpl6jliJfooaggKi9nZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgbGlzdERlcHQodGhpcy5xdWVyeVBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuZGVwdExpc3QgPSBfdGhpczIuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAiaWQiKTsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog6L2s5o2i6YOo6Zeo5pWw5o2u57uT5p6EICovbm9ybWFsaXplcjogZnVuY3Rpb24gbm9ybWFsaXplcihub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUuaWQsCiAgICAgICAgbGFiZWw6IG5vZGUuZGVwdE5hbWUsCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4KICAgICAgfTsKICAgIH0sCiAgICAvLyDlrZflhbjnirbmgIHlrZflhbjnv7vor5EKICAgIHN0YXR1c0Zvcm1hdDogZnVuY3Rpb24gc3RhdHVzRm9ybWF0KHJvdywgY29sdW1uKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLnN0YXR1c09wdGlvbnMsIHJvdy5zdGF0dXMpOwogICAgfSwKICAgIC8vIOWPlua2iOaMiemSrgogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICB9LAogICAgLy8g6KGo5Y2V6YeN572uCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHBhcmVudElkOiB1bmRlZmluZWQsCiAgICAgICAgZGVwdE5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBvcmRlck51bTogdW5kZWZpbmVkLAogICAgICAgIGxlYWRlcjogdW5kZWZpbmVkLAogICAgICAgIHBob25lOiB1bmRlZmluZWQsCiAgICAgICAgZW1haWw6IHVuZGVmaW5lZCwKICAgICAgICBzdGF0dXM6IHRoaXMuc2VsZWN0RGljdERlZmF1bHQodGhpcy5zdGF0dXNPcHRpb25zKQogICAgICB9OwogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOwogICAgfSwKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi9oYW5kbGVRdWVyeTogZnVuY3Rpb24gaGFuZGxlUXVlcnkoKSB7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi9yZXNldFF1ZXJ5OiBmdW5jdGlvbiByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7CiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgIH0sCiAgICAvKiog5paw5aKe5oyJ6ZKu5pON5L2cICovaGFuZGxlQWRkOiBmdW5jdGlvbiBoYW5kbGVBZGQocm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIGlmIChyb3cgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuZm9ybS5wYXJlbnRJZCA9IHJvdy5pZDsKICAgICAgfQogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIua3u+WKoOmDqOmXqCI7CiAgICAgIGxpc3REZXB0KHsKICAgICAgICBwYWdlTnVtOiAiYWxsIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5kZXB0T3B0aW9ucyA9IF90aGlzMy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICJpZCIpOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5L+u5pS55oyJ6ZKu5pON5L2cICovaGFuZGxlVXBkYXRlOiBmdW5jdGlvbiBoYW5kbGVVcGRhdGUocm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIGdldERlcHQocm93LmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNC5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczQub3BlbiA9IHRydWU7CiAgICAgICAgX3RoaXM0LnRpdGxlID0gIuS/ruaUuemDqOmXqCI7CiAgICAgIH0pOwogICAgICBsaXN0RGVwdEV4Y2x1ZGVDaGlsZChyb3cuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LmRlcHRPcHRpb25zID0gX3RoaXM0LmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgImlkIik7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDmj5DkuqTmjInpkq4gKi8KICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgY2xvbmVEYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczUuZm9ybSkpOwogICAgICAgICAgaWYgKGNsb25lRGF0YS5wYXJlbnRJZCA9PT0gMCkgewogICAgICAgICAgICBkZWxldGUgY2xvbmVEYXRhWyJwYXJlbnRJZCJdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzNS5mb3JtLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdXBkYXRlRGVwdChjbG9uZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXM1Lm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICAgIF90aGlzNS5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXM1LmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGREZXB0KGNsb25lRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczUubXNnU3VjY2Vzcygi5paw5aKe5oiQ5YqfIik7CiAgICAgICAgICAgICAgX3RoaXM1Lm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpczUuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi9oYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOWQjeensOS4uiInICsgcm93LmRlcHROYW1lICsgJyLnmoTmlbDmja7pobk/JywgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBkZWxEZXB0KHJvdy5pZCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNi5nZXRMaXN0KCk7CiAgICAgICAgX3RoaXM2Lm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["listDept","getDept","delDept","addDept","updateDept","listDeptExcludeChild","Treeselect","name","components","data","loading","showSearch","deptList","deptOptions","title","open","statusOptions","queryParams","deptName","undefined","status","pageNum","form","rules","parentId","required","message","trigger","orderNum","email","type","phone","pattern","created","_this","getList","getDicts","then","response","methods","_this2","handleTree","normalizer","node","children","length","id","label","statusFormat","row","column","selectDictLabel","cancel","reset","leader","selectDictDefault","resetForm","handleQuery","resetQuery","handleAdd","_this3","handleUpdate","_this4","submitForm","_this5","$refs","validate","valid","cloneData","JSON","parse","stringify","msgSuccess","handleDelete","_this6","$confirm","confirmButtonText","cancelButtonText"],"sources":["src/views/admin/permission/dept/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form v-show=\"showSearch\" ref=\"queryForm\" :model=\"queryParams\" :inline=\"true\">\n      <el-form-item label=\"部门名称\" prop=\"deptName\">\n        <el-input\n          v-model=\"queryParams.deptName\"\n          placeholder=\"请输入部门名称\"\n          clearable\n          size=\"small\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"状态\" prop=\"status\">\n        <el-select v-model=\"queryParams.status\" placeholder=\"部门状态\" clearable size=\"small\">\n          <el-option\n            v-for=\"dict in statusOptions\"\n            :key=\"dict.dictValue\"\n            :label=\"dict.dictLabel\"\n            :value=\"dict.dictValue\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          v-hasPermi=\"['permission:dept:post']\"\n          type=\"primary\"\n          plain\n          icon=\"el-icon-plus\"\n          size=\"mini\"\n          @click=\"handleAdd\"\n        >新增</el-button>\n      </el-col>\n      <right-toolbar :show-search.sync=\"showSearch\" @queryTable=\"getList\" />\n    </el-row>\n\n    <el-table\n      v-loading=\"loading\"\n      :data=\"deptList\"\n      row-key=\"id\"\n      default-expand-all\n      :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\n    >\n      <el-table-column prop=\"deptName\" label=\"部门名称\" />\n      <el-table-column prop=\"orderNum\" label=\"排序\" width=\"200\" />\n      <el-table-column prop=\"status\" label=\"状态\" :formatter=\"statusFormat\" width=\"200\" />\n      <el-table-column label=\"更新时间\" align=\"center\" prop=\"update_datetime\">\n        <template slot-scope=\"scope\">\n          <span>{{ parseTime(scope.row.update_datetime) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"create_datetime\">\n        <template slot-scope=\"scope\">\n          <span>{{ parseTime(scope.row.create_datetime) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        v-if=\"hasPermi(['permission:dept:{id}:put','permission:dept:post','permission:dept:{id}:delete'])\"\n        label=\"操作\"\n        align=\"center\"\n        class-name=\"small-padding fixed-width\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            v-hasPermi=\"['permission:dept:{id}:put']\"\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-edit\"\n            @click=\"handleUpdate(scope.row)\"\n          >修改</el-button>\n          <el-button\n            v-hasPermi=\"['permission:dept:post']\"\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-plus\"\n            @click=\"handleAdd(scope.row)\"\n          >新增</el-button>\n          <el-button\n            v-if=\"scope.row.parentId !== 0\"\n            v-hasPermi=\"['permission:dept:{id}:delete']\"\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 添加或修改部门对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"600px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-row>\n          <el-col v-if=\"form.parentId !== 0\" :span=\"24\">\n            <el-form-item label=\"上级部门\" prop=\"parentId\">\n              <treeselect v-model=\"form.parentId\" :options=\"deptOptions\" :normalizer=\"normalizer\" placeholder=\"选择上级部门\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"部门名称\" prop=\"deptName\">\n              <el-input v-model=\"form.deptName\" placeholder=\"请输入部门名称\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"显示排序\" prop=\"orderNum\">\n              <el-input-number v-model=\"form.orderNum\" controls-position=\"right\" :min=\"0\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"负责人\" prop=\"leader\">\n              <el-input v-model=\"form.leader\" placeholder=\"请输入负责人\" maxlength=\"20\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"联系电话\" prop=\"phone\">\n              <el-input v-model=\"form.phone\" placeholder=\"请输入联系电话\" maxlength=\"11\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"邮箱\" prop=\"email\">\n              <el-input v-model=\"form.email\" placeholder=\"请输入邮箱\" maxlength=\"50\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"部门状态\">\n              <el-radio-group v-model=\"form.status\">\n                <el-radio\n                  v-for=\"dict in statusOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictValue\"\n                >{{ dict.dictLabel }}</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { listDept, getDept, delDept, addDept, updateDept, listDeptExcludeChild } from \"@/api/admin/permission/dept\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"Dept\",\n  components: { Treeselect },\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 表格树数据\n      deptList: [],\n      // 部门树选项\n      deptOptions: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 状态数据字典\n      statusOptions: [],\n      // 查询参数\n      queryParams: {\n        deptName: undefined,\n        status: undefined,\n        pageNum: \"all\"\n      },\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        parentId: [\n          { required: true, message: \"上级部门不能为空\", trigger: \"blur\" }\n        ],\n        deptName: [\n          { required: true, message: \"部门名称不能为空\", trigger: \"blur\" }\n        ],\n        orderNum: [\n          { required: true, message: \"显示排序不能为空\", trigger: \"blur\" }\n        ],\n        email: [\n          {\n            type: \"email\",\n            message: \"'请输入正确的邮箱地址\",\n            trigger: [\"blur\", \"change\"]\n          }\n        ],\n        phone: [\n          {\n            pattern: /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/,\n            message: \"请输入正确的手机号码\",\n            trigger: \"blur\"\n          }\n        ]\n      }\n    };\n  },\n  created() {\n    this.getList();\n    this.getDicts(\"sys_normal_disable\").then(response => {\n      this.statusOptions = response.data;\n    });\n  },\n  methods: {\n    /** 查询部门列表 */\n    getList() {\n      this.loading = true;\n      listDept(this.queryParams).then(response => {\n        this.deptList = this.handleTree(response.data, \"id\");\n        this.loading = false;\n      });\n    },\n    /** 转换部门数据结构 */\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.id,\n        label: node.deptName,\n        children: node.children\n      };\n    },\n    // 字典状态字典翻译\n    statusFormat(row, column) {\n      return this.selectDictLabel(this.statusOptions, row.status);\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: undefined,\n        parentId: undefined,\n        deptName: undefined,\n        orderNum: undefined,\n        leader: undefined,\n        phone: undefined,\n        email: undefined,\n        status: this.selectDictDefault(this.statusOptions)\n      };\n      this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    /** 新增按钮操作 */\n    handleAdd(row) {\n      this.reset();\n      if (row !== undefined) {\n        this.form.parentId = row.id;\n      }\n      this.open = true;\n      this.title = \"添加部门\";\n      listDept({ pageNum: \"all\" }).then(response => {\n        this.deptOptions = this.handleTree(response.data, \"id\");\n      });\n    },\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.reset();\n      getDept(row.id).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"修改部门\";\n      });\n      listDeptExcludeChild(row.id).then(response => {\n        this.deptOptions = this.handleTree(response.data, \"id\");\n      });\n    },\n    /** 提交按钮 */\n    submitForm: function() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          const cloneData = JSON.parse(JSON.stringify(this.form));\n          if (cloneData.parentId === 0) {\n            delete cloneData[\"parentId\"];\n          }\n          if (this.form.id !== undefined) {\n            updateDept(cloneData).then(response => {\n              this.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getList();\n            });\n          } else {\n            addDept(cloneData).then(response => {\n              this.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      this.$confirm('是否确认删除名称为\"' + row.deptName + '\"的数据项?', \"警告\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function() {\n        return delDept(row.id);\n      }).then(() => {\n        this.getList();\n        this.msgSuccess(\"删除成功\");\n      });\n    }\n  }\n};\n</script>\n"],"mappings":"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"}]}