{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js!/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jayson/Desktop/work/DDM-admin/src/views/admin/advertise/imageAds/upload.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/views/admin/advertise/imageAds/upload.vue","mtime":1721542305023},{"path":"/Users/jayson/Desktop/work/DDM-admin/babel.config.js","mtime":1720245284261},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1720245293567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyIpOwp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIHByb3BzOiBbJ3VyaSddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogdW5kZWZpbmVkLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdXBsb2FkSW1nVXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJICsgIi9hZG1pbi91cGxvYWQvIiwKICAgICAgLy8g5LiK5Lyg55qE5Zu+54mH5pyN5Yqh5Zmo5Zyw5Z2ACiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyAoMCwgX2F1dGguZ2V0VG9rZW4pKCkKICAgICAgfQogICAgfTsKICB9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CiAgICByZW1vdmVJbWFnZTogZnVuY3Rpb24gcmVtb3ZlSW1hZ2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoInVyaSIsICIiKTsKICAgICAgdGhpcy52YWx1ZSA9ICcnOwogICAgfSwKICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgIHZhciB1cmkgPSByZXMuZGF0YS5pbWFnZS5zcGxpdCgnLycpLnNsaWNlKHJlcy5kYXRhLmltYWdlLnNwbGl0KCcvJykubGVuZ3RoIC0gMywgcmVzLmRhdGEuaW1hZ2Uuc3BsaXQoJy8nKS5sZW5ndGgpLmpvaW4oJy8nKTsKICAgICAgdGhpcy4kZW1pdCgidXJpIiwgdXJpKTsKICAgICAgdGhpcy52YWx1ZSA9IHJlcy5kYXRhLmltYWdlOwogICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTsKICAgIH0sCiAgICBoYW5kbGVCZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZUJlZm9yZVVwbG9hZCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICB0ZXh0OiAi5LiK5Lyg5LitIiwKICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgwLCAwLCAwLCAwLjcpIgogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWRFcnJvcjogZnVuY3Rpb24gaGFuZGxlVXBsb2FkRXJyb3IoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgbWVzc2FnZTogIuS4iuS8oOWksei0pSIKICAgICAgfSk7CiAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["_auth","require","props","data","value","undefined","dialogVisible","uploadImgUrl","process","env","VUE_APP_BASE_API","headers","Authorization","getToken","watch","methods","removeImage","$emit","handleUploadSuccess","res","uri","image","split","slice","length","join","loading","close","handleBeforeUpload","$loading","lock","text","background","handleUploadError","$message","type","message"],"sources":["src/views/admin/advertise/imageAds/upload.vue"],"sourcesContent":["<template>\n  <div class=\"component-upload-image\">\n    <el-upload\n        :action=\"uploadImgUrl\"\n        list-type=\"picture-card\"\n        :on-success=\"handleUploadSuccess\"\n        :before-upload=\"handleBeforeUpload\"\n        :on-error=\"handleUploadError\"\n        name=\"file\"\n        :show-file-list=\"false\"\n        :headers=\"headers\"\n        style=\"display: inline-block; vertical-align: top\"\n    >\n      <!-- <el-image v-if=\"!value\" :src=\"value\">\n        <div slot=\"error\" class=\"image-slot\">\n          <i class=\"el-icon-plus\" />\n        </div>\n      </el-image>\n      <div v-else class=\"image\">\n        <el-image :src=\"value\" :style=\"`width:200px;height:150px;`\" fit=\"fill\" />\n        <div class=\"mask\">\n          <div class=\"actions\">\n            <span title=\"预览\" @click.stop=\"dialogVisible = true\">\n              <i class=\"el-icon-zoom-in\" />\n            </span>\n            <span title=\"移除\" @click.stop=\"removeImage\">\n              <i class=\"el-icon-delete\" />\n            </span>\n          </div>\n        </div>\n      </div> -->\n    </el-upload>\n    <el-dialog :visible.sync=\"dialogVisible\" title=\"预览\" width=\"800\" append-to-body>\n      <img :src=\"value\" style=\"display: block; max-width: 100%; margin: 0 auto;\">\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getToken } from \"@/utils/auth\";\n\nexport default {\n  props: ['uri'],\n  data() {\n    return {\n      value: undefined,\n      dialogVisible: false,\n      uploadImgUrl: process.env.VUE_APP_BASE_API + \"/admin/upload/\", // 上传的图片服务器地址\n      headers: {\n        Authorization: \"Bearer \" + getToken()\n      }\n    };\n  },\n  watch: {\n\n  },\n  methods: {\n    removeImage() {\n      this.$emit(\"uri\", \"\");\n      this.value = '';\n    },\n    handleUploadSuccess(res) {\n      const uri = res.data.image.split('/').slice(res.data.image.split('/').length -3, res.data.image.split('/').length).join('/')\n      this.$emit(\"uri\", uri);\n      this.value = res.data.image;\n      this.loading.close();\n    },\n    handleBeforeUpload() {\n      this.loading = this.$loading({\n        lock: true,\n        text: \"上传中\",\n        background: \"rgba(0, 0, 0, 0.7)\"\n      });\n    },\n    handleUploadError() {\n      this.$message({\n        type: \"error\",\n        message: \"上传失败\"\n      });\n      this.loading.close();\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.image {\n  position: relative;\n  .mask {\n    opacity: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: all 0.3s;\n  }\n  &:hover .mask {\n    opacity: 1;\n  }\n}\n</style>\n"],"mappings":";;;;;;;;AAuCA,IAAAA,KAAA,GAAAC,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iCAEA;EACAC,KAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,KAAA,EAAAC,SAAA;MACAC,aAAA;MACAC,YAAA,EAAAC,OAAA,CAAAC,GAAA,CAAAC,gBAAA;MAAA;MACAC,OAAA;QACAC,aAAA,kBAAAC,cAAA;MACA;IACA;EACA;EACAC,KAAA,GAEA;EACAC,OAAA;IACAC,WAAA,WAAAA,YAAA;MACA,KAAAC,KAAA;MACA,KAAAb,KAAA;IACA;IACAc,mBAAA,WAAAA,oBAAAC,GAAA;MACA,IAAAC,GAAA,GAAAD,GAAA,CAAAhB,IAAA,CAAAkB,KAAA,CAAAC,KAAA,MAAAC,KAAA,CAAAJ,GAAA,CAAAhB,IAAA,CAAAkB,KAAA,CAAAC,KAAA,MAAAE,MAAA,MAAAL,GAAA,CAAAhB,IAAA,CAAAkB,KAAA,CAAAC,KAAA,MAAAE,MAAA,EAAAC,IAAA;MACA,KAAAR,KAAA,QAAAG,GAAA;MACA,KAAAhB,KAAA,GAAAe,GAAA,CAAAhB,IAAA,CAAAkB,KAAA;MACA,KAAAK,OAAA,CAAAC,KAAA;IACA;IACAC,kBAAA,WAAAA,mBAAA;MACA,KAAAF,OAAA,QAAAG,QAAA;QACAC,IAAA;QACAC,IAAA;QACAC,UAAA;MACA;IACA;IACAC,iBAAA,WAAAA,kBAAA;MACA,KAAAC,QAAA;QACAC,IAAA;QACAC,OAAA;MACA;MACA,KAAAV,OAAA,CAAAC,KAAA;IACA;EACA;AACA"}]}