{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js!/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jayson/Desktop/work/DDM-admin/src/views/admin/system/message/Mymessage.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/views/admin/system/message/Mymessage.vue","mtime":1720245294026},{"path":"/Users/jayson/Desktop/work/DDM-admin/babel.config.js","mtime":1720245284261},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1720245293567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvamF5c29uL0Rlc2t0b3Avd29yay9ERE0tYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2pheXNvbi9EZXNrdG9wL3dvcmsvRERNLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDIuanMiKSk7CnZhciBfbWVzc2FnZSA9IHJlcXVpcmUoIkAvYXBpL2FkbWluL3N5c3RlbS9tZXNzYWdlIik7CnZhciBfc3RvcmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvc3RvcmUiKSk7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiTXltZXNzYWdlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g5p+l6K+i6YCa55+lCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAKICAgICAgfSwKICAgICAgbWVzc2FnZUxpc3Q6IFtdLAogICAgICAvLyDlt7Lor7vpgJrnn6UKICAgICAgY291bnRSZWFkZWQ6IDAsCiAgICAgIG1lc3NhZ2VSZWFkZWRMaXN0OiBbXSwKICAgICAgLy8g5pyq6K+75raI5oGv5YiX6KGoCiAgICAgIG1lc3NhZ2VVbnJlYWRMaXN0OiBbXSwKICAgICAgY291bnRVbnJlYWQ6IDAsCiAgICAgIGJhZGdlVHlwZTogImRhbmdlciIsCiAgICAgIC8vIOmAieS4reafpeivouWQjueahOivpue7huS/oeaBrwogICAgICBzaG93aW5nTXNnSXRlbToge30KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKiog5p+l6K+i6YCa55+l5YiX6KGoICovZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLy8g5bey6K+76YCa55+l5YiX6KGoCiAgICAgICgwLCBfbWVzc2FnZS51c2VyTWVzc2FnZSkodGhpcy5hZGREYXRlUmFuZ2UoKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKCgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgdGhpcy5xdWVyeVBhcmFtcyksIHt9LCB7CiAgICAgICAgaXNfcmVhZDogIlRydWUiCiAgICAgIH0pKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5tZXNzYWdlUmVhZGVkTGlzdCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICBfdGhpcy5jb3VudFJlYWRlZCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgIH0pOwogICAgICAvLyDmnKror7vpgJrnn6XliJfooagKICAgICAgKDAsIF9tZXNzYWdlLnVzZXJNZXNzYWdlKSh0aGlzLmFkZERhdGVSYW5nZSgoMCwgX29iamVjdFNwcmVhZDIuZGVmYXVsdCkoKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKHt9LCB0aGlzLnF1ZXJ5UGFyYW1zKSwge30sIHsKICAgICAgICBpc19yZWFkOiAiRmFsc2UiCiAgICAgIH0pKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5tZXNzYWdlVW5yZWFkTGlzdCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICBfdGhpcy5jb3VudFVucmVhZCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgICAgX3RoaXMubWVzc2FnZUxpc3QgPSBfdGhpcy5tZXNzYWdlVW5yZWFkTGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Qoa2V5LCBrZXlQYXRoKSB7CiAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBrZXlbMF0gPT09ICIxIiA/IHRoaXMubWVzc2FnZVVucmVhZExpc3QgOiB0aGlzLm1lc3NhZ2VSZWFkZWRMaXN0OwogICAgICB0aGlzLmJhZGdlVHlwZSA9IGtleVswXSA9PT0gIjEiID8gImRhbmdlciIgOiAiaW5mbyI7CiAgICB9LAogICAgLy8g6YCa55+l5YiX6KGo5r+A5rS75ZCOCiAgICBoYW5kbGVMaXN0U2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVMaXN0U2VsZWN0KGtleSwga2V5UGF0aCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5zaG93aW5nTXNnSXRlbSA9IHRoaXMubWVzc2FnZUxpc3Rba2V5WzBdXTsKICAgICAgLy8g5L+u5pS56YCa55+l5p+l6K+i54q25oCBCiAgICAgIGlmICh0aGlzLmJhZGdlVHlwZSA9PT0gImRhbmdlciIpIHsKICAgICAgICAoMCwgX21lc3NhZ2UudXBkYXRlSXNSZWFkKSh0aGlzLnNob3dpbmdNc2dJdGVtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICBfc3RvcmUuZGVmYXVsdC5jb21taXQoIlNFVF9VTlJFQURfTVNHX0NPVU5UIiwgX3N0b3JlLmRlZmF1bHQuZ2V0dGVycy51bnJlYWRfbXNnX2NvdW50IC0gMSk7CiAgICAgICAgICAgIF90aGlzMi5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzMi5nZXRMaXN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["_message","require","_store","_interopRequireDefault","name","data","queryParams","pageNum","pageSize","messageList","countReaded","messageReadedList","messageUnreadList","countUnread","badgeType","showingMsgItem","created","getList","methods","_this","userMessage","addDateRange","_objectSpread2","default","is_read","then","response","results","count","handleSelect","key","keyPath","handleListSelect","_this2","updateIsRead","code","store","commit","getters","unread_msg_count","open"],"sources":["src/views/admin/system/message/Mymessage.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card shadow=\"never\">\n      <div class=\"message-page-con message-category-con\">\n        <el-menu\n          default-active=\"1\"\n          class=\"el-menu-vertical-demo\"\n          @select=\"handleSelect\"\n        >\n          <el-menu-item index=\"1\">\n            <template slot=\"title\">\n              <span class=\"category-title\">未读消息</span>\n              <el-badge style=\"margin-bottom: 3px\" :value=\"countUnread\" :hidden=\"countUnread===0\" />\n            </template>\n          </el-menu-item>\n          <el-menu-item index=\"2\">\n            <span class=\"category-title\">已读消息</span>\n            <el-badge style=\"margin-bottom: 3px\" type=\"info\" :value=\"countReaded\" />\n          </el-menu-item>\n        </el-menu>\n      </div>\n      <div class=\"message-page-con message-list-con\">\n        <el-menu\n          default-active=\"2\"\n          class=\"el-menu-vertical-demo\"\n          @select=\"handleListSelect\"\n        >\n          <el-menu-item v-for=\"(item,index) in messageList\" :key=\"index\" :index=\"index.toString()\">\n            <template slot=\"title\">\n              <div style=\"line-height: 10px!important;height: 20px;\">\n                <p class=\"msg-title\">{{ item.title }}</p>\n                <el-badge is-dot class=\"item\" :type=\"badgeType\" />\n                {{ item.create_datetime }}\n\n              </div>\n            </template>\n          </el-menu-item>\n        </el-menu>\n      </div>\n      <div class=\"message-page-con message-view-con\">\n        <div class=\"message-view-header\">\n          <h2 class=\"message-view-title\">{{ showingMsgItem.title }}</h2>\n          <time class=\"message-view-time\">{{ showingMsgItem.create_datetime }}</time>\n        </div>\n        <div v-html=\"showingMsgItem.content\" />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { updateIsRead, userMessage } from \"@/api/admin/system/message\";\nimport store from \"@/store\";\n\nexport default {\n  name: \"Mymessage\",\n  data() {\n    return {\n      // 查询通知\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10\n      },\n      messageList: [],\n      // 已读通知\n      countReaded: 0,\n      messageReadedList: [],\n      // 未读消息列表\n      messageUnreadList: [],\n      countUnread: 0,\n      badgeType: \"danger\",\n      // 选中查询后的详细信息\n      showingMsgItem: {}\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    /** 查询通知列表 */\n    getList() {\n      // 已读通知列表\n      userMessage(this.addDateRange({ ...this.queryParams, is_read: \"True\" })).then(response => {\n        this.messageReadedList = response.data.results;\n        this.countReaded = response.data.count;\n      }\n      );\n      // 未读通知列表\n      userMessage(this.addDateRange({ ...this.queryParams, is_read: \"False\" })).then(response => {\n        this.messageUnreadList = response.data.results;\n        this.countUnread = response.data.count;\n        this.messageList = this.messageUnreadList;\n      }\n      );\n    },\n    handleSelect(key, keyPath) {\n      this.messageList = key[0] === \"1\" ? this.messageUnreadList : this.messageReadedList;\n      this.badgeType = key[0] === \"1\" ? \"danger\" : \"info\";\n    },\n    // 通知列表激活后\n    handleListSelect(key, keyPath) {\n      this.showingMsgItem = this.messageList[key[0]];\n      // 修改通知查询状态\n      if (this.badgeType === \"danger\") {\n        updateIsRead(this.showingMsgItem).then(response => {\n          if (response.code === 200) {\n            store.commit(\"SET_UNREAD_MSG_COUNT\", store.getters.unread_msg_count - 1);\n            this.open = false;\n            this.getList();\n          }\n        });\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n  .app-container {\n    background-color: #f5f7f9;\n  }\n\n  .message-category-con {\n    border-right: 1px solid #e6e6e6;\n    width: 200px;\n  }\n\n  .message-page-con {\n    height: calc(100vh - 176px);\n    display: inline-block;\n    vertical-align: top;\n    position: relative;\n  }\n\n  .category-title {\n    display: inline-block;\n    width: 65px;\n  }\n\n  .message-list-con {\n    border-right: 1px solid #e6e6e6;\n    width: 230px;\n  }\n\n  .msg-title {\n    word-break: break-all;\n    white-space: normal;\n    line-height: 15px;\n    color: rgb(170, 169, 169);\n  }\n\n  .message-list-con .el-menu-item {\n    height: 80px;\n    padding-top: 5px;\n  }\n\n  .item {\n    margin-right: 10px;\n    margin-bottom: 5px;\n  }\n\n  .message-view-con {\n    position: absolute;\n    left: 486px;\n    top: 16px;\n    right: 16px;\n    bottom: 16px;\n    overflow: auto;\n    padding: 12px 20px 0;\n\n  }\n\n  .message-view-header {\n    margin-bottom: 20px;\n\n  }\n\n  .message-view-title {\n    display: inline-block;\n  }\n\n  .message-view-time {\n    margin-left: 20px;\n  }\n</style>\n"],"mappings":";;;;;;;;AAmDA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iCAEA;EACAG,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACA;MACAC,WAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,WAAA;MACA;MACAC,WAAA;MACAC,iBAAA;MACA;MACAC,iBAAA;MACAC,WAAA;MACAC,SAAA;MACA;MACAC,cAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACA,aACAD,OAAA,WAAAA,QAAA;MAAA,IAAAE,KAAA;MACA;MACA,IAAAC,oBAAA,OAAAC,YAAA,KAAAC,cAAA,CAAAC,OAAA,MAAAD,cAAA,CAAAC,OAAA,WAAAjB,WAAA;QAAAkB,OAAA;MAAA,KAAAC,IAAA,WAAAC,QAAA;QACAP,KAAA,CAAAR,iBAAA,GAAAe,QAAA,CAAArB,IAAA,CAAAsB,OAAA;QACAR,KAAA,CAAAT,WAAA,GAAAgB,QAAA,CAAArB,IAAA,CAAAuB,KAAA;MACA,CACA;MACA;MACA,IAAAR,oBAAA,OAAAC,YAAA,KAAAC,cAAA,CAAAC,OAAA,MAAAD,cAAA,CAAAC,OAAA,WAAAjB,WAAA;QAAAkB,OAAA;MAAA,KAAAC,IAAA,WAAAC,QAAA;QACAP,KAAA,CAAAP,iBAAA,GAAAc,QAAA,CAAArB,IAAA,CAAAsB,OAAA;QACAR,KAAA,CAAAN,WAAA,GAAAa,QAAA,CAAArB,IAAA,CAAAuB,KAAA;QACAT,KAAA,CAAAV,WAAA,GAAAU,KAAA,CAAAP,iBAAA;MACA,CACA;IACA;IACAiB,YAAA,WAAAA,aAAAC,GAAA,EAAAC,OAAA;MACA,KAAAtB,WAAA,GAAAqB,GAAA,mBAAAlB,iBAAA,QAAAD,iBAAA;MACA,KAAAG,SAAA,GAAAgB,GAAA;IACA;IACA;IACAE,gBAAA,WAAAA,iBAAAF,GAAA,EAAAC,OAAA;MAAA,IAAAE,MAAA;MACA,KAAAlB,cAAA,QAAAN,WAAA,CAAAqB,GAAA;MACA;MACA,SAAAhB,SAAA;QACA,IAAAoB,qBAAA,OAAAnB,cAAA,EAAAU,IAAA,WAAAC,QAAA;UACA,IAAAA,QAAA,CAAAS,IAAA;YACAC,cAAA,CAAAC,MAAA,yBAAAD,cAAA,CAAAE,OAAA,CAAAC,gBAAA;YACAN,MAAA,CAAAO,IAAA;YACAP,MAAA,CAAAhB,OAAA;UACA;QACA;MACA;IACA;EACA;AACA"}]}