{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js!/Users/jayson/Desktop/work/DDM-admin/src/utils/zipdownload.js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/utils/zipdownload.js","mtime":1720245294013},{"path":"/Users/jayson/Desktop/work/DDM-admin/babel.config.js","mtime":1720245284261},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvamF5c29uL0Rlc2t0b3Avd29yay9ERE0tYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRvd25Mb2FkWmlwID0gZG93bkxvYWRaaXA7CmV4cG9ydHMucmVzb2x2ZUJsb2IgPSByZXNvbHZlQmxvYjsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyIpOwp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7CnZhciBtaW1lTWFwID0gewogIHhsc3g6ICJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCIsCiAgemlwOiAiYXBwbGljYXRpb24vemlwIgp9Owp2YXIgYmFzZVVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEk7CmZ1bmN0aW9uIGRvd25Mb2FkWmlwKHN0ciwgZmlsZW5hbWUpIHsKICB2YXIgdXJsID0gYmFzZVVybCArIHN0cjsKICAoMCwgX2F4aW9zLmRlZmF1bHQpKHsKICAgIG1ldGhvZDogImdldCIsCiAgICB1cmw6IHVybCwKICAgIHJlc3BvbnNlVHlwZTogImJsb2IiLAogICAgaGVhZGVyczogewogICAgICAiQXV0aG9yaXphdGlvbiI6ICJCZWFyZXIgIiArICgwLCBfYXV0aC5nZXRUb2tlbikoKQogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmVzb2x2ZUJsb2IocmVzLCBtaW1lTWFwLnppcCk7CiAgfSk7Cn0KLyoqCiAqIOino+aekGJsb2Llk43lupTlhoXlrrnlubbkuIvovb0KICogQHBhcmFtIHsqfSByZXMgYmxvYuWTjeW6lOWGheWuuQogKiBAcGFyYW0ge1N0cmluZ30gbWltZVR5cGUgTUlNReexu+WeiwogKi8KZnVuY3Rpb24gcmVzb2x2ZUJsb2IocmVzLCBtaW1lVHlwZSkgewogIHZhciBhTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtyZXMuZGF0YV0sIHsKICAgIHR5cGU6IG1pbWVUeXBlCiAgfSk7CiAgLy8gLy/ku45yZXNwb25zZeeahGhlYWRlcnPkuK3ojrflj5ZmaWxlbmFtZSwg5ZCO56uvcmVzcG9uc2Uuc2V0SGVhZGVyKCJDb250ZW50LWRpc3Bvc2l0aW9uIiwgImF0dGFjaG1lbnQ7IGZpbGVuYW1lPXh4eHguZG9jeCIpIOiuvue9rueahOaWh+S7tuWQjTsKICB2YXIgcGF0dCA9IG5ldyBSZWdFeHAoImZpbGVuYW1lPShbXjtdK1xcLlteXFwuO10rKTsqIik7CiAgdmFyIGNvbnRlbnREaXNwb3NpdGlvbiA9IGRlY29kZVVSSShyZXMuaGVhZGVyc1siY29udGVudC1kaXNwb3NpdGlvbiJdKTsKICB2YXIgcmVzdWx0ID0gcGF0dC5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7CiAgdmFyIGZpbGVOYW1lID0gcmVzdWx0WzFdOwogIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXCIvZywgIiIpOwogIGFMaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogIGFMaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBmaWxlTmFtZSk7IC8vIOiuvue9ruS4i+i9veaWh+S7tuWQjeensAogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYUxpbmspOwogIGFMaW5rLmNsaWNrKCk7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhTGluayk7Cn0="},{"version":3,"names":["_axios","_interopRequireDefault","require","_auth","mimeMap","xlsx","zip","baseUrl","process","env","VUE_APP_BASE_API","downLoadZip","str","filename","url","axios","method","responseType","headers","getToken","then","res","resolveBlob","mimeType","aLink","document","createElement","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","result","exec","fileName","replace","href","URL","createObjectURL","setAttribute","body","appendChild","click"],"sources":["/Users/jayson/Desktop/work/DDM-admin/src/utils/zipdownload.js"],"sourcesContent":["import axios from \"axios\";\nimport { getToken } from \"@/utils/auth\";\n\nconst mimeMap = {\n  xlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n  zip: \"application/zip\"\n};\n\nconst baseUrl = process.env.VUE_APP_BASE_API;\nexport function downLoadZip(str, filename) {\n  var url = baseUrl + str;\n  axios({\n    method: \"get\",\n    url: url,\n    responseType: \"blob\",\n    headers: { \"Authorization\": \"Bearer \" + getToken() }\n  }).then(res => {\n    resolveBlob(res, mimeMap.zip);\n  });\n}\n/**\n * 解析blob响应内容并下载\n * @param {*} res blob响应内容\n * @param {String} mimeType MIME类型\n */\nexport function resolveBlob(res, mimeType) {\n  const aLink = document.createElement(\"a\");\n  var blob = new Blob([res.data], { type: mimeType });\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\n  var patt = new RegExp(\"filename=([^;]+\\\\.[^\\\\.;]+);*\");\n  var contentDisposition = decodeURI(res.headers[\"content-disposition\"]);\n  var result = patt.exec(contentDisposition);\n  var fileName = result[1];\n  fileName = fileName.replace(/\\\"/g, \"\");\n  aLink.href = URL.createObjectURL(blob);\n  aLink.setAttribute(\"download\", fileName); // 设置下载文件名称\n  document.body.appendChild(aLink);\n  aLink.click();\n  document.body.appendChild(aLink);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAEA,IAAME,OAAO,GAAG;EACdC,IAAI,EAAE,mEAAmE;EACzEC,GAAG,EAAE;AACP,CAAC;AAED,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,gBAAgB;AACrC,SAASC,WAAWA,CAACC,GAAG,EAAEC,QAAQ,EAAE;EACzC,IAAIC,GAAG,GAAGP,OAAO,GAAGK,GAAG;EACvB,IAAAG,cAAK,EAAC;IACJC,MAAM,EAAE,KAAK;IACbF,GAAG,EAAEA,GAAG;IACRG,YAAY,EAAE,MAAM;IACpBC,OAAO,EAAE;MAAE,eAAe,EAAE,SAAS,GAAG,IAAAC,cAAQ,EAAC;IAAE;EACrD,CAAC,CAAC,CAACC,IAAI,CAAC,UAAAC,GAAG,EAAI;IACbC,WAAW,CAACD,GAAG,EAAEjB,OAAO,CAACE,GAAG,CAAC;EAC/B,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACO,SAASgB,WAAWA,CAACD,GAAG,EAAEE,QAAQ,EAAE;EACzC,IAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACzC,IAAIC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACP,GAAG,CAACQ,IAAI,CAAC,EAAE;IAAEC,IAAI,EAAEP;EAAS,CAAC,CAAC;EACnD;EACA,IAAIQ,IAAI,GAAG,IAAIC,MAAM,CAAC,+BAA+B,CAAC;EACtD,IAAIC,kBAAkB,GAAGC,SAAS,CAACb,GAAG,CAACH,OAAO,CAAC,qBAAqB,CAAC,CAAC;EACtE,IAAIiB,MAAM,GAAGJ,IAAI,CAACK,IAAI,CAACH,kBAAkB,CAAC;EAC1C,IAAII,QAAQ,GAAGF,MAAM,CAAC,CAAC,CAAC;EACxBE,QAAQ,GAAGA,QAAQ,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EACtCd,KAAK,CAACe,IAAI,GAAGC,GAAG,CAACC,eAAe,CAACd,IAAI,CAAC;EACtCH,KAAK,CAACkB,YAAY,CAAC,UAAU,EAAEL,QAAQ,CAAC,CAAC,CAAC;EAC1CZ,QAAQ,CAACkB,IAAI,CAACC,WAAW,CAACpB,KAAK,CAAC;EAChCA,KAAK,CAACqB,KAAK,CAAC,CAAC;EACbpB,QAAQ,CAACkB,IAAI,CAACC,WAAW,CAACpB,KAAK,CAAC;AAClC"}]}