{"remainingRequest":"/Users/mac/Desktop/DDM-admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/DDM-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/DDM-admin/src/views/admin/notice/banners/upload.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mac/Desktop/DDM-admin/src/views/admin/notice/banners/upload.vue","mtime":1702065174000},{"path":"/Users/mac/Desktop/DDM-admin/babel.config.js","mtime":1702065174000},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1703645363792},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1703645364828},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1703645363792},{"path":"/Users/mac/Desktop/DDM-admin/node_modules/vue-loader/lib/index.js","mtime":1703645365038}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ3VyaSddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogdW5kZWZpbmVkLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdXBsb2FkSW1nVXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJICsgIi9hZG1pbi91cGxvYWQvIiwKICAgICAgLy8g5LiK5Lyg55qE5Zu+54mH5pyN5Yqh5Zmo5Zyw5Z2ACiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBnZXRUb2tlbigpCiAgICAgIH0KICAgIH07CiAgfSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogewogICAgcmVtb3ZlSW1hZ2U6IGZ1bmN0aW9uIHJlbW92ZUltYWdlKCkgewogICAgICB0aGlzLiRlbWl0KCJ1cmkiLCAiIik7CiAgICAgIHRoaXMudmFsdWUgPSAnJzsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcykgewogICAgICB2YXIgdXJpID0gcmVzLmRhdGEuaW1hZ2Uuc3BsaXQoJy8nKS5zbGljZShyZXMuZGF0YS5pbWFnZS5zcGxpdCgnLycpLmxlbmd0aCAtIDMsIHJlcy5kYXRhLmltYWdlLnNwbGl0KCcvJykubGVuZ3RoKS5qb2luKCcvJyk7CiAgICAgIHRoaXMuJGVtaXQoInVyaSIsIHVyaSk7CiAgICAgIHRoaXMudmFsdWUgPSByZXMuZGF0YS5pbWFnZTsKICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCk7CiAgICB9LAogICAgaGFuZGxlQmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVCZWZvcmVVcGxvYWQoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRoaXMuJGxvYWRpbmcoewogICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgdGV4dDogIuS4iuS8oOS4rSIsCiAgICAgICAgYmFja2dyb3VuZDogInJnYmEoMCwgMCwgMCwgMC43KSIKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVXBsb2FkRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZEVycm9yKCkgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIG1lc3NhZ2U6ICLkuIrkvKDlpLHotKUiCiAgICAgIH0pOwogICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["getToken","props","data","value","undefined","dialogVisible","uploadImgUrl","process","env","VUE_APP_BASE_API","headers","Authorization","watch","methods","removeImage","$emit","handleUploadSuccess","res","uri","image","split","slice","length","join","loading","close","handleBeforeUpload","$loading","lock","text","background","handleUploadError","$message","type","message"],"sources":["src/views/admin/notice/banners/upload.vue"],"sourcesContent":["<template>\n    <div class=\"component-upload-image\">\n      <el-upload\n        :action=\"uploadImgUrl\"\n        list-type=\"picture-card\"\n        :on-success=\"handleUploadSuccess\"\n        :before-upload=\"handleBeforeUpload\"\n        :on-error=\"handleUploadError\"\n        name=\"file\"\n        :show-file-list=\"false\"\n        :headers=\"headers\"\n        style=\"display: inline-block; vertical-align: top\"\n      >\n        <!-- <el-image v-if=\"!value\" :src=\"value\">\n          <div slot=\"error\" class=\"image-slot\">\n            <i class=\"el-icon-plus\" />\n          </div>\n        </el-image>\n        <div v-else class=\"image\">\n          <el-image :src=\"value\" :style=\"`width:200px;height:150px;`\" fit=\"fill\" />\n          <div class=\"mask\">\n            <div class=\"actions\">\n              <span title=\"预览\" @click.stop=\"dialogVisible = true\">\n                <i class=\"el-icon-zoom-in\" />\n              </span>\n              <span title=\"移除\" @click.stop=\"removeImage\">\n                <i class=\"el-icon-delete\" />\n              </span>\n            </div>\n          </div>\n        </div> -->\n      </el-upload>\n      <el-dialog :visible.sync=\"dialogVisible\" title=\"预览\" width=\"800\" append-to-body>\n        <img :src=\"value\" style=\"display: block; max-width: 100%; margin: 0 auto;\">\n      </el-dialog>\n    </div>\n  </template>\n  \n  <script>\n  import { getToken } from \"@/utils/auth\";\n  \n  export default {\n    props: ['uri'],\n    data() {\n      return {\n        value: undefined,\n        dialogVisible: false,\n        uploadImgUrl: process.env.VUE_APP_BASE_API + \"/admin/upload/\", // 上传的图片服务器地址\n        headers: {\n          Authorization: \"Bearer \" + getToken()\n        }\n      };\n    },\n    watch: {\n        \n    },\n    methods: {\n      removeImage() {\n        this.$emit(\"uri\", \"\");\n        this.value = '';\n      },\n      handleUploadSuccess(res) {\n        const uri = res.data.image.split('/').slice(res.data.image.split('/').length -3, res.data.image.split('/').length).join('/')\n        this.$emit(\"uri\", uri);\n        this.value = res.data.image;\n        this.loading.close();\n      },\n      handleBeforeUpload() {\n        this.loading = this.$loading({\n          lock: true,\n          text: \"上传中\",\n          background: \"rgba(0, 0, 0, 0.7)\"\n        });\n      },\n      handleUploadError() {\n        this.$message({\n          type: \"error\",\n          message: \"上传失败\"\n        });\n        this.loading.close();\n      }\n    }\n  };\n  </script>\n  \n  <style scoped lang=\"scss\">\n  .image {\n    position: relative;\n    .mask {\n      opacity: 0;\n      position: absolute;\n      top: 0;\n      width: 100%;\n      background-color: rgba(0, 0, 0, 0.5);\n      transition: all 0.3s;\n    }\n    &:hover .mask {\n      opacity: 1;\n    }\n  }\n  </style>\n  "],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,SAAAA,QAAA;AAEA;EACAC,KAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,KAAA,EAAAC,SAAA;MACAC,aAAA;MACAC,YAAA,EAAAC,OAAA,CAAAC,GAAA,CAAAC,gBAAA;MAAA;MACAC,OAAA;QACAC,aAAA,cAAAX,QAAA;MACA;IACA;EACA;EACAY,KAAA,GAEA;EACAC,OAAA;IACAC,WAAA,WAAAA,YAAA;MACA,KAAAC,KAAA;MACA,KAAAZ,KAAA;IACA;IACAa,mBAAA,WAAAA,oBAAAC,GAAA;MACA,IAAAC,GAAA,GAAAD,GAAA,CAAAf,IAAA,CAAAiB,KAAA,CAAAC,KAAA,MAAAC,KAAA,CAAAJ,GAAA,CAAAf,IAAA,CAAAiB,KAAA,CAAAC,KAAA,MAAAE,MAAA,MAAAL,GAAA,CAAAf,IAAA,CAAAiB,KAAA,CAAAC,KAAA,MAAAE,MAAA,EAAAC,IAAA;MACA,KAAAR,KAAA,QAAAG,GAAA;MACA,KAAAf,KAAA,GAAAc,GAAA,CAAAf,IAAA,CAAAiB,KAAA;MACA,KAAAK,OAAA,CAAAC,KAAA;IACA;IACAC,kBAAA,WAAAA,mBAAA;MACA,KAAAF,OAAA,QAAAG,QAAA;QACAC,IAAA;QACAC,IAAA;QACAC,UAAA;MACA;IACA;IACAC,iBAAA,WAAAA,kBAAA;MACA,KAAAC,QAAA;QACAC,IAAA;QACAC,OAAA;MACA;MACA,KAAAV,OAAA,CAAAC,KAAA;IACA;EACA;AACA"}]}