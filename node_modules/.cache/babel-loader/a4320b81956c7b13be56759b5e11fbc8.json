{"remainingRequest":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js!/Users/jayson/Desktop/work/DDM-admin/src/store/modules/user.js","dependencies":[{"path":"/Users/jayson/Desktop/work/DDM-admin/src/store/modules/user.js","mtime":1720245294012},{"path":"/Users/jayson/Desktop/work/DDM-admin/babel.config.js","mtime":1720245284261},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/cache-loader/dist/cjs.js","mtime":1720245288376},{"path":"/Users/jayson/Desktop/work/DDM-admin/node_modules/babel-loader/lib/index.js","mtime":1720245285342}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwp2YXIgX2xvZ2luID0gcmVxdWlyZSgiQC9hcGkvYWRtaW4vbG9naW4iKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7CnZhciB1c2VyID0gewogIHN0YXRlOiB7CiAgICB0b2tlbjogKDAsIF9hdXRoLmdldFRva2VuKSgpLAogICAgbmFtZTogIiIsCiAgICBhdmF0YXI6ICIiLAogICAgcm9sZXM6IFtdLAogICAgcGVybWlzc2lvbnM6IFtdLAogICAgdW5yZWFkX21zZ19jb3VudDogMAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgICB9LAogICAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICAgIH0sCiAgICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgICAgc3RhdGUucm9sZXMgPSByb2xlczsKICAgIH0sCiAgICBTRVRfUEVSTUlTU0lPTlM6IGZ1bmN0aW9uIFNFVF9QRVJNSVNTSU9OUyhzdGF0ZSwgcGVybWlzc2lvbnMpIHsKICAgICAgc3RhdGUucGVybWlzc2lvbnMgPSBwZXJtaXNzaW9uczsKICAgIH0sCiAgICBTRVRfVU5SRUFEX01TR19DT1VOVDogZnVuY3Rpb24gU0VUX1VOUkVBRF9NU0dfQ09VTlQoc3RhdGUsIHVucmVhZF9tc2dfY291bnQpIHsKICAgICAgc3RhdGUudW5yZWFkX21zZ19jb3VudCA9IHVucmVhZF9tc2dfY291bnQ7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDnmbvlvZUKICAgIExvZ2luOiBmdW5jdGlvbiBMb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLnRyaW0oKTsKICAgICAgdmFyIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICAgIHZhciBjb2RlID0gdXNlckluZm8uY29kZTsKICAgICAgdmFyIHV1aWQgPSB1c2VySW5mby51dWlkOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICgwLCBfbG9naW4ubG9naW4pKHVzZXJuYW1lLCBwYXNzd29yZCwgY29kZSwgdXVpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAoMCwgX2F1dGguc2V0VG9rZW4pKHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCByZXMuZGF0YS5kYXRhLnRva2VuKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgR2V0SW5mbzogZnVuY3Rpb24gR2V0SW5mbyhfcmVmMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgKDAsIF9sb2dpbi5nZXRJbmZvKShzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgdXNlciA9IHJlcy5kYXRhLnVzZXI7CiAgICAgICAgICB2YXIgYXZhdGFyID0gdXNlci5hdmF0YXIgPyBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJICsgdXNlci5hdmF0YXIgOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvcHJvZmlsZS5qcGciKTsKICAgICAgICAgIGlmIChyZXMuZGF0YS5yb2xlcyAmJiByZXMuZGF0YS5yb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIC8vIOmqjOivgei/lOWbnueahHJvbGVz5piv5ZCm5piv5LiA5Liq6Z2e56m65pWw57uECiAgICAgICAgICAgIGNvbW1pdCgiU0VUX1JPTEVTIiwgcmVzLmRhdGEucm9sZXMpOwogICAgICAgICAgICBjb21taXQoIlNFVF9QRVJNSVNTSU9OUyIsIHJlcy5kYXRhLnBlcm1pc3Npb25zKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbW1pdCgiU0VUX1JPTEVTIiwgWyJST0xFX0RFRkFVTFQiXSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb21taXQoIlNFVF9OQU1FIiwgdXNlci5uYW1lKTsKICAgICAgICAgIGNvbW1pdCgiU0VUX1VOUkVBRF9NU0dfQ09VTlQiLCB1c2VyLnVucmVhZF9tc2dfY291bnQpOwogICAgICAgICAgY29tbWl0KCJTRVRfQVZBVEFSIiwgYXZhdGFyKTsKICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YCA5Ye657O757ufCiAgICBMb2dPdXQ6IGZ1bmN0aW9uIExvZ091dChfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgKDAsIF9sb2dpbi5sb2dvdXQpKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgIiIpOwogICAgICAgICAgY29tbWl0KCJTRVRfUk9MRVMiLCBbXSk7CiAgICAgICAgICBjb21taXQoIlNFVF9QRVJNSVNTSU9OUyIsIFtdKTsKICAgICAgICAgICgwLCBfYXV0aC5yZW1vdmVUb2tlbikoKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWJjeerryDnmbvlh7oKICAgIEZlZExvZ091dDogZnVuY3Rpb24gRmVkTG9nT3V0KF9yZWY0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgIiIpOwogICAgICAgICgwLCBfYXV0aC5yZW1vdmVUb2tlbikoKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTsKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gdXNlcjs="},{"version":3,"names":["_login","require","_auth","user","state","token","getToken","name","avatar","roles","permissions","unread_msg_count","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","SET_UNREAD_MSG_COUNT","actions","Login","_ref","userInfo","commit","username","trim","password","code","uuid","Promise","resolve","reject","login","then","res","setToken","data","catch","error","GetInfo","_ref2","getInfo","process","env","VUE_APP_BASE_API","length","LogOut","_ref3","logout","removeToken","FedLogOut","_ref4","_default","exports","default"],"sources":["/Users/jayson/Desktop/work/DDM-admin/src/store/modules/user.js"],"sourcesContent":["import { getInfo, login, logout } from \"@/api/admin/login\";\nimport { getToken, removeToken, setToken } from \"@/utils/auth\";\n\nconst user = {\n  state: {\n    token: getToken(),\n    name: \"\",\n    avatar: \"\",\n    roles: [],\n    permissions: [],\n    unread_msg_count: 0\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token;\n    },\n    SET_NAME: (state, name) => {\n      state.name = name;\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar;\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles;\n    },\n    SET_PERMISSIONS: (state, permissions) => {\n      state.permissions = permissions;\n    },\n    SET_UNREAD_MSG_COUNT: (state, unread_msg_count) => {\n      state.unread_msg_count = unread_msg_count;\n    }\n  },\n\n  actions: {\n    // 登录\n    Login({ commit }, userInfo) {\n      const username = userInfo.username.trim();\n      const password = userInfo.password;\n      const code = userInfo.code;\n      const uuid = userInfo.uuid;\n      return new Promise((resolve, reject) => {\n        login(username, password, code, uuid).then(res => {\n          setToken(res.data.data.token);\n          commit(\"SET_TOKEN\", res.data.data.token);\n          resolve();\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    },\n\n    // 获取用户信息\n    GetInfo({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        getInfo(state.token).then(res => {\n          const user = res.data.user;\n          const avatar = user.avatar ? process.env.VUE_APP_BASE_API + user.avatar : require(\"@/assets/images/profile.jpg\");\n          if (res.data.roles && res.data.roles.length > 0) { // 验证返回的roles是否是一个非空数组\n            commit(\"SET_ROLES\", res.data.roles);\n            commit(\"SET_PERMISSIONS\", res.data.permissions);\n          } else {\n            commit(\"SET_ROLES\", [\"ROLE_DEFAULT\"]);\n          }\n          commit(\"SET_NAME\", user.name);\n          commit(\"SET_UNREAD_MSG_COUNT\", user.unread_msg_count);\n          commit(\"SET_AVATAR\", avatar);\n          resolve(res.data);\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    },\n\n    // 退出系统\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token).then(() => {\n          commit(\"SET_TOKEN\", \"\");\n          commit(\"SET_ROLES\", []);\n          commit(\"SET_PERMISSIONS\", []);\n          removeToken();\n          resolve();\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise(resolve => {\n        commit(\"SET_TOKEN\", \"\");\n        removeToken();\n        resolve();\n      });\n    }\n  }\n};\n\nexport default user;\n"],"mappings":"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"}]}